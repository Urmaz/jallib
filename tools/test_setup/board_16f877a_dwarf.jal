-- --------------------------------------------------------------------------
-- BOARD FILE
-- --------------------------------------------------------------------------
-- This file defines the configuration of a specific 
-- test-board for JALLIB testing.
--
-- DB01 - Dwarf board for 40pin pic
-- DBxx (8 leds) on port A
-- DB017 (LCD) on port B
--
-- --------------------------------------------------------------------------
-- At the end, include a specific test.
-- --------------------------------------------------------------------------

-- chip setup
include 16F877a          

pragma target clock 20_000_000                  -- xtal frequency
pragma target OSC        hs
pragma target   LVP disabled
pragma target   WDT disabled

-- LED setup            
var bit LED           is pin_a0  
var bit LED_direction is pin_a0_direction

-- PWM setup
var bit pwm_direction = pin_b0_direction
;pin_b0_direction = output 
           
-- LCD setup
var bit RS               is pin_b5 -- LCD command/data select. 
var bit lcd_RS_direction is pin_b5_direction   
var bit EN               is pin_b4 -- LCD data trigger 
var bit lcd_EN_direction is pin_b4_direction   

var byte data_port is portb_low -- LCD data  port
var bit lcd_d4_direction is pin_b0_direction
var bit lcd_d5_direction is pin_b1_direction
var bit lcd_d6_direction is pin_b2_direction
var bit lcd_d7_direction is pin_b3_direction

procedure set_lcd_io () is
   pin_b0_direction = output
   pin_b1_direction = output
   pin_b2_direction = output
   pin_b3_direction = output
   pin_b4_direction = output
   pin_b5_direction = output
end procedure


var volatile bit i2c_scl            is pin_c3
var volatile bit i2c_scl_direction  is pin_c3_direction
var volatile bit i2c_sda            is pin_c4
var volatile bit i2c_sda_direction  is pin_c4_direction


-- ----------------------------------------------
-- setup end; include generic test programs below
-- ----------------------------------------------

;include test_hello_world_lcd
;include test_blink