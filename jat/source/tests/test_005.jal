;------------------------------------------------------------------------------
; test of combi of var + var'put and var + var'get
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; Begin of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

var byte alpha = 2

procedure alpha'put(byte in x) is
;   alpha = x + 4    ;; recursive - not supported by JAL or JAT
   print_var(x)
end procedure

procedure helper1(volatile byte out device) is
   alpha = alpha + 8
end procedure

var byte bravo = 2

function bravo'get() return byte is
;   return bravo + 4   ;; recursive - not suported by JAL or JAT
   return 4
end function

procedure helper2(volatile byte out device) is
   bravo = bravo + 8
end procedure

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; End of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


;for 10 loop

   delay_1ms(300)    
   start_of_test_marker()   
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; Start of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------

   ;---------------------------------------------------------------------------
   ; test var/pvar'put combi from procedure   
   test_header(1)

   alpha = 1;
   helper1(alpha)
   print_var(alpha)

   ;---------------------------------------------------------------------------
   ; test var/pvar'put combi from main
   test_header(2)

   alpha = 1;
   alpha = alpha + 16
   print_var(alpha)


   ;---------------------------------------------------------------------------
   ; test var/pvar'put combi from procedure   
   test_header(3)

   bravo = 1;
   helper2(bravo)
   print_var(bravo)

   ;---------------------------------------------------------------------------
   ; test var/pvar'put combi from main
   test_header(4)

   bravo = 1;
   bravo = bravo + 16
   print_var(bravo)

   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; End of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
      
;end loop
