;------------------------------------------------------------------------------
; test of call by reference (non-volatile 'in out')
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; Begin of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

procedure increment(byte in out v) is
   v = v + 1
end procedure


procedure intermediate(byte in out w) is
   increment(w)
end procedure
   
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; End of test procedure/function definitions
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


for 10 loop

   delay_1ms(300)
   start_of_test_marker()
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; Start of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   
   ;---------------------------------------------------------------------------
   ; test call by reference
   test_header(1)
   
   var byte a = 1
   
   increment(a)
   
   print_var(a)
   
   ;---------------------------------------------------------------------------
   ; test call by reference II
   test_header(2)
   
   a = 1
   
   intermediate(a)
   
   print_var(a)

   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
   ; End of test code
   ;---------------------------------------------------------------------------
   ;---------------------------------------------------------------------------
      
end loop