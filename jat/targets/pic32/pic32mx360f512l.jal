-- ------------------------------------------------------
-- Title: Microchip pic32mx360f512l.jal
--
-- Author: Albert Faber, Copyright (c) 2010, all rights reserved.
--
-- Adapted-by:
--
-- Compiler: JAT
--
-- This file is part of jallib  (http://jallib.googlecode.com)
-- Released under the BSD license (http://www.opensource.org/licenses/bsd-license.php)
--
-- Description:
-- Device file for Microchip pic32mx360f512l.
--
-- Sources:
--
-- Notes:
--  - super bare bones, just enough to blink a led
--
-- ------------------------------------------------------
--

;@j2cg static volatile unsigned char * LATD  = (volatile unsigned char *)0xBF8860E0;
;@j2cg static volatile unsigned char * TRISD = (volatile unsigned char *)0xBF8860C0;
;@j2cg static volatile unsigned char * PORTD = (volatile unsigned char *)0xBF8860D0;


 
; -----------------------------------------------------------------------------
; Lines starting with ;@j2cg are inserted at a *G*lobal level, so before 'main'.
; -----------------------------------------------------------------------------
;@j2cg 
;@j2cg // volatile unsigned char* PORTD = (unsigned char*)0xBF8860D0;

; -----------------------------------------------------------------------------
; Lines starting with ;@j2c are inserted as part of a function definition or - 
; when at root level, put into main().
; -----------------------------------------------------------------------------

; this is just a program that 'kills time' in a calibrated method
procedure delay_ms(word in ms) is
;@j2c  volatile int i, j;        
;@j2c  for (j=0; j<ms; j++) {    
;@j2c  	for (i=0; i< 2500; i++);
;@j2c  }                         
end procedure


const byte all_output = 0b0000_0000
const byte all_input  = 0b1111_1111

-- var byte LATD at 0xBF8860E0
-- var byte TRISD at 0xBF8860C0
-- var byte PORTD at 0xBF8860D0


procedure PORTD'put(byte in x) is
	;@j2cg *LATD = x;
end procedure

function PORTD'get() return byte is
	;@j2cg return *PORTD;
end function

procedure TRISD'put(byte in x) is
	;@j2cg *TRISD = x;
end procedure

function TRISD'get() return byte is
	;@j2cg return *TRISD;
end function





