
;include pic_target
include pc_target

procedure callby_reference(byte in out v) is
   v = v + 2
end procedure


procedure callby_code(volatile byte in out v) is
   v = v + 1
end procedure

procedure TestFromValue(byte in c) is
   callby_code(c)
   callby_reference(c)
   print_var(c)
end procedure

procedure TestFromReference(byte in out b) is
   callby_code(b)
   callby_reference(b)
   print_var(b)
end procedure

procedure TestFromCode(volatile byte in out b) is
   callby_code(b)
;   callby_reference(b)
   print_var(b)
end procedure

var byte a
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; test group:
;  call *by* code, reference and value X call *from* code, reference, value
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------





forever loop

   delay_1ms(300)

   ;------------------------------------------------------------------------------
   ; test call by code, reference and value from *value*
   test_header(9)
   
   a = 1
   TestFromValue(a)
   print_var(a)
   
   ;------------------------------------------------------------------------------
   ; test call by code, reference and value from *reference*
   test_header(10)                                          
   
   a = 1
   TestFromReference(a)
   print_var(a)
   
   ;------------------------------------------------------------------------------
   ; test call by code, reference and value from *code*
   test_header(11)
   
   a = 1
   TestFromCode(a)
   print_var(a)         
  
end loop      
