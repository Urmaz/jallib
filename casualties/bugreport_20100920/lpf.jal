
const byte LPF_CONST = 32
; const 64 betekent 95% in ca 300 calls, 99% in 400
; const 32 betekent 95% in ca 150 calls = 18.75ms @ 8 kHz

function lpf_2nd_order (sword in Ui, sdword in out U1, sdword in out U2) return sword is
	var sdword tmp
	
	tmp = Ui
	tmp = tmp * 65536
	tmp = tmp - (U1 * 2)
	tmp = tmp - U2
	
	U1 = U1 + (Tmp / LPF_CONST)
	U2 = U2 + (U1  / LPF_CONST)
	
	return (U2 + 32768) / 65536
end function