<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    </head>
    <body>
		        <div id="page">
        
            <div id="pagecontent">

			    
    <h1>serial_hw_int_cts</h1>

    <div>
		<font size="+1"><i>serial_hw_int_cts.jal. Interrupt driven buffered serial interface with flow control.</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Rob Hamerling, Copyright (c) 2008..2008, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			=2.4h
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		Serial communications<br/><blockquote>- receive and transmit data transfer is interrupt driven- receive and transmit data transfer uses circular buffers- automatic CTS flow control with spare free space for FiFo buffer</blockquote>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#f70c6ca6165fc2d133d75d94b8aee814">var  byte  _serial_offsetxmthead                -- offset next byte from appl
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c46b12c6a90fed3e0829f13d3eb439ee">var  byte  _serial_rcvbuf[SERIAL_RCVBUFSIZE]    -- circular input buffer
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9fac42ebc310ef79e5909f4fc198223f">var  byte  _serial_offsetxmttail                -- offset next byte to port
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ef7d4c233a714870313f51ef3fa3efe5">var  byte  _serial_offsetrcvhead                -- offset next byte from port
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6985352400dbf212c4fa78d67ce593eb">var  byte  _serial_xmtbuf[SERIAL_XMTBUFSIZE]    -- circular output buffer
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7a7d3d18df3253a5c28d3a149b5a49f3">var  byte  _serial_offsetrcvtail                -- offset next byte to appl
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#28cb07a978a6fcca5e605f0ad520828e">serial_init()</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1919352ad15a35407f8ae9d0a91590f9">_serial_receive_interrupt_handler()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#85b19760d0805fc1744964273e1c734b">_serial_transmit_interrupt_handler()</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#652e34ed7b319ca8c20acdae0b5fbf98">serial_receive_byte(byte out data) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#683333bec13a6604a8224dff857cc10b">serial_send_byte(byte in data) return byte</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="f70c6ca6165fc2d133d75d94b8aee814" href="#summary">var  byte  _serial_offsetxmthead                -- offset next byte from appl
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c46b12c6a90fed3e0829f13d3eb439ee" href="#summary">var  byte  _serial_rcvbuf[SERIAL_RCVBUFSIZE]    -- circular input buffer
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9fac42ebc310ef79e5909f4fc198223f" href="#summary">var  byte  _serial_offsetxmttail                -- offset next byte to port
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ef7d4c233a714870313f51ef3fa3efe5" href="#summary">var  byte  _serial_offsetrcvhead                -- offset next byte from port
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6985352400dbf212c4fa78d67ce593eb" href="#summary">var  byte  _serial_xmtbuf[SERIAL_XMTBUFSIZE]    -- circular output buffer
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7a7d3d18df3253a5c28d3a149b5a49f3" href="#summary">var  byte  _serial_offsetrcvtail                -- offset next byte to appl
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="28cb07a978a6fcca5e605f0ad520828e" href="#summary">serial_init()</a></code></b>
				<p>	<br/>serial_init - procedure to initialize library functionality<br/><br/>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1919352ad15a35407f8ae9d0a91590f9" href="#summary">_serial_receive_interrupt_handler()</a></code></b>
				<p>	<br/><blockquote>UART - serial receive interrupt handling</blockquote><br/>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="85b19760d0805fc1744964273e1c734b" href="#summary">_serial_transmit_interrupt_handler()</a></code></b>
				<p>	<br/><blockquote>UART - serial transmit interrupt handling</blockquote><br/>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="652e34ed7b319ca8c20acdae0b5fbf98" href="#summary">serial_receive_byte(byte out data) return bit</a></code></b>
				<p>	<br/><blockquote>Return byte (if any) from circular receive buffer for UART</blockquote><br/><blockquote>input:   nothing</blockquote><br/><blockquote>output:  received byte (if any)</blockquote><br/><blockquote>returns: true  when byte returnedfalse if no byte available</blockquote><br/><blockquote>notes: - Rises CTS when receive buffer has more than &lt;DELTA&gt;bytes free space after delivering byte to caller.</blockquote><br/>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="683333bec13a6604a8224dff857cc10b" href="#summary">serial_send_byte(byte in data) return byte</a></code></b>
				<p>	<br/><blockquote>Put a single byte in circular transmit buffer for UART</blockquote><br/><blockquote>input:   byte to transmit</blockquote><br/><blockquote>returns: transmitted byte (or 0x00 when data discarded)</blockquote><br/><blockquote>notes: - Activates transmit interrupt handler when data buffered- When buffer full act as indicated in 'serial_overflow_discard'</blockquote><ul><li> TRUE:  discard data</li></ul><blockquote>(and return 0x00 as data byte)</blockquote><ul><li> FALSE: wait for free buffer space</li></ul><blockquote>(returns only after data has been stored in buffer)</blockquote><br/>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
	<tr>
		<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/unvalidated/sample/by_device/16f88/serial_hw_int_cts_echo.jal" target="_blank">serial_hw_int_cts_echo.jal</a></td>
	</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

