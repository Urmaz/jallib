<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    </head>
    <body>
		        <div id="page">
        
            <div id="pagecontent">

			    
    <h1>i2c_software</h1>

    <div>
		<font size="+1"><i>i2c_software</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Wouter van Ooijen, Copyright (C) 1998, 1999 Wouter van Ooijen
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Joep Suijs.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Software implementation of I2C (single) master.
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#f987b6291650bad29cb7324b169956a6">i2c_initialize()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2f0cebb54da62e4f6c61ba4b1cda726a">i2c_stop()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4c49ee2eabee86f03b1a23575b8e2e4a">i2c_start()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8da7dc9dfdc20096b83b18fbf7f0f3b6">i2c_restart()</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#68485e912768c733908cfc989955ef31">_i2c_bit_out(bit in x)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d22b44d79c003b85e42b2629ad219521">_i2c_bit_in(bit out x)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3d77fd4a4ead9dc04c9dd7ae191c87ab">_i2c_wait()</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#b8104c9854109b36075711ecf1e4d51d">i2c_receive_byte( bit in ack) return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#cf7dc5c9f5a8ddf87650a84d32f0dd09">i2c_transmit_byte( byte in x ) return bit</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="f987b6291650bad29cb7324b169956a6" href="#summary">i2c_initialize()</a></code></b>
				<p>	<pre>
i2c_initialize - initialize the software i2c bus

The output latch values are always low,
the lines are switched open-collector fashion by 
manipulating the direction registers.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2f0cebb54da62e4f6c61ba4b1cda726a" href="#summary">i2c_stop()</a></code></b>
				<p>	<pre>
i2c_stop - output a stop condition


</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4c49ee2eabee86f03b1a23575b8e2e4a" href="#summary">i2c_start()</a></code></b>
				<p>	<pre>
i2c_start - output a start condition


</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8da7dc9dfdc20096b83b18fbf7f0f3b6" href="#summary">i2c_restart()</a></code></b>
				<p>	<pre>
i2c_restart - output a (re)start condition

A restart is a start without a previous stop.
This procedure is provided as part of the API to maintain compatibility 
with the i2c hardware master lib.

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="68485e912768c733908cfc989955ef31" href="#summary">_i2c_bit_out(bit in x)</a></code></b>
				<p>	<pre>
_i2c_bit_out- output a single bit (for internal use only)


</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d22b44d79c003b85e42b2629ad219521" href="#summary">_i2c_bit_in(bit out x)</a></code></b>
				<p>	<pre>
_i2c_bit_in- input a single bit (for internal use only)


</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3d77fd4a4ead9dc04c9dd7ae191c87ab" href="#summary">_i2c_wait()</a></code></b>
				<p>	<pre>
_i2c_wait - wait for a change to settle (for internal use only)

The delay is determined by i2c_bus_speed and is 1/4 of the cycle time.
Given the delay resolution of 1 us and all actions required by 
i2c_software routines, the actual bus speed will be lower then the
configured maximum.

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="b8104c9854109b36075711ecf1e4d51d" href="#summary">i2c_receive_byte( bit in ack) return byte</a></code></b>
				<p>	<pre>
i2c_receive_byte - read one byte

The ACK flag indicated if the byte read must be acked.
In general, all bytes read by the master are acked, except the last one.
Failing to NACK the last byte read will give unpredictable results.
(Often it will provide repeatable sequences, where one out of 2 to 4 of 
the reads from a specific device is correct. You are warned!)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="cf7dc5c9f5a8ddf87650a84d32f0dd09" href="#summary">i2c_transmit_byte( byte in x ) return bit</a></code></b>
				<p>	<pre>
i2c_transmit_byte - output one byte


</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
		<i>No sample found</i>

			<br/>

            </div>
        </div>


	</body>
</html>

