<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    </head>
    <body>
		        <div id="page">
        
            <div id="pagecontent">

			    
    <h1>pwm_common</h1>

    <div>
		<font size="+1"><i>hardware PWM control, generic procedures</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Stef Mientki, Copyright (C) 2002-2006, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		this lib handles generic operation on PWM, <br/>whatever the channel number, etc...<br/>It's aimed to be used with pwm_{register} lib (eg. pwm_ccp1.jal, ...)<br/>

	</p>
	<br/>


	<b>Notes</b>
	<p>
		this is a heavy refactoring of the original pwm_hardware.jal<br/>Stef's lib<br/>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No depency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#9fea442b5e944c5b0771c9b75d90e939">var volatile dword _pr2_1
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#21ff34ec1ab24cb3d19178e7767aaca1">var volatile dword _pr2_16
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#336cf7d1d7817be09502d92b48c4aefc">var volatile dword _pr2_4
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#ad12f8ac1fd66c9e37addba207148017">pwm_max_resolution(byte in prescaler)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1bfa6dbb409649ba09112553d5bd003f">pwm_set_frequency(dword in freq)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="9fea442b5e944c5b0771c9b75d90e939" href="#summary">var volatile dword _pr2_1
</a></code></b>
				<p>	Store potential PR2 value that could be used to actually<br/>perform the accurate frequency<br/>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="21ff34ec1ab24cb3d19178e7767aaca1" href="#summary">var volatile dword _pr2_16
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="336cf7d1d7817be09502d92b48c4aefc" href="#summary">var volatile dword _pr2_4
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="ad12f8ac1fd66c9e37addba207148017" href="#summary">pwm_max_resolution(byte in prescaler)</a></code></b>
				<p>	-----------------------------------------------------------------------------<br/>initializes the PWM for high resolution (10 bits) and starts the PWM <br/>While setting high resolution, prescaler can be used to adjust frequency. <br/>The parameter corresponds to the prescaler value, and can be either:<br/><ul><li> 1 : high frequency</li><li> 4 : medium frequency</li><li> 16: low frequency</li></ul><br/>Not all frequencies are available, you'll need the datasheet to actually<br/>compute the computed frequency according to the clock speed.<br/><br/>FYI, here's a table showing frequency for common clock speed:<br/><br/>-----------------+------------+------------+------------+------------+<br/>prescaler/clock  |    4MHz    |    8MHz    |   10MHz    |   20MHz    |<br/>-----------------+------------+------------+------------+------------+<br/><blockquote>1            |    3.90kHz |    7.81kHz |   9.77kHz  |   19.43kHz |4            |     976Hz  |    1.95kHz |   2.44kHz  |    4.88kHz |16           |     244Hz  |     488Hz  |    610Hz   |    1.22kHz |</blockquote>-----------------+------------+------------+------------+------------+<br/><br/>----------------------------------------------------------------------------<br/>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1bfa6dbb409649ba09112553d5bd003f" href="#summary">pwm_set_frequency(dword in freq)</a></code></b>
				<p>	-----------------------------------------------------------------------------<br/>initializes the PWM for accurate frequency and starts the PWM<br/>Frequency and dutycycle should be set by the following constants<br/><blockquote>const pwm_frequency = 2_000    -- pwm frequency in Hzconst pwm1_dutycycle = 50      -- dutycycle in percent of PWM1const pwm2_dutycycle = 50      -- dutycycle in percent of PWM2</blockquote>-----------------------------------------------------------------------------<br/>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
		<i>No sample found</i>

			<br/>

            </div>
        </div>


	</body>
</html>

