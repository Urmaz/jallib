-- --------------------------------------------------------------------------
-- pwm1 TEST file 
-- --------------------------------------------------------------------------
-- This file defines a test for JALLIB testing, using a test-board
--  defined by a BOARD file .
--
-- setup: a led on ccp2
--
-- --------------------------------------------------------------------------
-- 
-- --------------------------------------------------------------------------
enable_digital_io()

-- Configure PWM
pin_ccp1_direction = output
include pwm_ccp1
pwm_max_resolution(1)
pwm1_on()

forever loop
	var byte i
	i = 0
	-- loop up and down, to produce different duty cycle
	while i < 250 loop
		pwm1_set_dutycycle(i)
		_usec_delay(10000)
		i = i + 1
	end loop
	while i > 0 loop
		pwm1_set_dutycycle(i)
		_usec_delay(10000)
		i = i - 1
	end loop
	-- turning off, the LED lights at max.
	_usec_delay(500000)
	pwm1_off()
	_usec_delay(500000)
	pwm1_on()

end loop

