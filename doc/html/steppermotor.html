<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>steppermotor - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="steppermotor">
    <h1>steppermotor</h1>
	</a>

    <div>
		<font size="+1"><i>steppermotor library</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Richard Zengerink, Copyright &copy; 2009..2010, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4m
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>this library can be used with steppermotor bipolair unipolair
             with or without stepperdriver ic
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1346910b923c6b702220d6ab6c488b74">var dword calculate = 0       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#133932d348b4efd2e1324a1f3496925a">var bit ramp_speedset = false </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#bd2dec683678a0aeaa8d6d620424da76">var word actual_vel = 0       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#78af387479bef3c04ae9b01b7be04b99">var word accel_ramp = 0       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#dafcb254bef1026cb1e1a99e67b64323">var bit stop = false          </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#edbe28c0fa6e1991db90e4a5ba8d9c68">var byte steppointer = 0      </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9e4c950592e4f74e8fe66b2649cb464a">var bit high_prescal = false  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#32d0ac4583cb9e823742abbc76e30e55">var sdword distance = 100     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0d89a0427a9dd194096893d7f5cc0c70">var bit decel_active = true   </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b1a5e8a88e63e36859f210251bcb309f">var bit accel_active = true   </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#02eebbaba889a6e86131ee882d1fa7d5">var bit cw = true             </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f3b46982262dd7b80d48dfdd01dbf848">var word set_vel = 0          </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3a5104813bccebab76f07331ed62c522">var bit run = false           </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e0c0547d5b162ffdbd417bcfb4d1e974">var dword pulses_sec = 0      </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d9b76358a85467c5e698b87657447138">var word tmr1register = 0     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#84565dc33fb9dcf2d908fd2029c70f83">var word tmr1register_new = 0 </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5766d79c230e066da2a829684a3462a5">var word decel_ramp = 0       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b6766665653d179ca1716479b4ce9c84">var bit full_step = true      </a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#20645fc9d81e421fe039148d6f96cd52">decel(word in sec, word in velocity)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#af524f0ca88afd0c0536bee36c6d99df">accel(word in sec, word in velocity)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#81e4cf1e2c0443fce6ac8d8d2ce4f820">stop_stepper()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#44bef3ca3bc1ee6266c2ac214695fd56">coil_stepper(bit in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0e7967360822471823cd3c7a3c0dee3e">timer1()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#fafbfc257a4de162e149e6e1a9d2e5a0">timer0()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#61231433d9fe2a67da1480e31ec37208">run_stepper(word in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b07ed84b6891ee0a7742c33826ddd18e">hold_stepper()</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#ab92e0a58b3f384581604ea9459c8e56">_timer0_01s_off() </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b49ec2e5993c10098549e7f2b2ba1d5b">_timer0_01s_on() </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#befcbf4ab03fe99ee1045f63362ab3b3">_velocity(word in data)</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1346910b923c6b702220d6ab6c488b74" href="#summary">var dword calculate = 0       </a></code></b>
				<p>	<pre>use for calculation of register with 2 decimals</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="133932d348b4efd2e1324a1f3496925a" href="#summary">var bit ramp_speedset = false </a></code></b>
				<p>	<pre>set if new speed is because of ramping</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="bd2dec683678a0aeaa8d6d620424da76" href="#summary">var word actual_vel = 0       </a></code></b>
				<p>	<pre>holds now speed in 1/100rpm</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="78af387479bef3c04ae9b01b7be04b99" href="#summary">var word accel_ramp = 0       </a></code></b>
				<p>	<pre>holds acceleration ramp in 1/100rpm per 1/100Sec</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="dafcb254bef1026cb1e1a99e67b64323" href="#summary">var bit stop = false          </a></code></b>
				<p>	<pre>is set during stop ramp and reset after stop</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="edbe28c0fa6e1991db90e4a5ba8d9c68" href="#summary">var byte steppointer = 0      </a></code></b>
				<p>	<pre>points to position in full_step or half_step array</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9e4c950592e4f74e8fe66b2649cb464a" href="#summary">var bit high_prescal = false  </a></code></b>
				<p>	<pre>wil be set when prescaler is 256 and reset at 2</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="32d0ac4583cb9e823742abbc76e30e55" href="#summary">var sdword distance = 100     </a></code></b>
				<p>	<pre>holds distance in pulses</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0d89a0427a9dd194096893d7f5cc0c70" href="#summary">var bit decel_active = true   </a></code></b>
				<p>	<pre>is set during deceleration</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b1a5e8a88e63e36859f210251bcb309f" href="#summary">var bit accel_active = true   </a></code></b>
				<p>	<pre>is set during acceleration</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="02eebbaba889a6e86131ee882d1fa7d5" href="#summary">var bit cw = true             </a></code></b>
				<p>	<pre>true is clockwise, false = counter clockwise</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f3b46982262dd7b80d48dfdd01dbf848" href="#summary">var word set_vel = 0          </a></code></b>
				<p>	<pre>holds desired speed in 1/100rpm</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3a5104813bccebab76f07331ed62c522" href="#summary">var bit run = false           </a></code></b>
				<p>	<pre>is set during run and reset after stop</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e0c0547d5b162ffdbd417bcfb4d1e974" href="#summary">var dword pulses_sec = 0      </a></code></b>
				<p>	<pre>holds calculation of number of pulses per second</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d9b76358a85467c5e698b87657447138" href="#summary">var word tmr1register = 0     </a></code></b>
				<p>	<pre>holds actual 16bit value for TMR1L and TMR1H</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="84565dc33fb9dcf2d908fd2029c70f83" href="#summary">var word tmr1register_new = 0 </a></code></b>
				<p>	<pre>holds 16bit new calculated value for TMR1L and TMR1H</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5766d79c230e066da2a829684a3462a5" href="#summary">var word decel_ramp = 0       </a></code></b>
				<p>	<pre>holds deceleration ramp in 1/100rpm per 1/100Sec</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b6766665653d179ca1716479b4ce9c84" href="#summary">var bit full_step = true      </a></code></b>
				<p>	<pre>if true than full step not true then half step</pre>
</p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="20645fc9d81e421fe039148d6f96cd52" href="#summary">decel(word in sec, word in velocity)</a></code></b>
				<p>	<pre>data in is 0.1 Seconds</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="af524f0ca88afd0c0536bee36c6d99df" href="#summary">accel(word in sec, word in velocity)</a></code></b>
				<p>	<pre>input is 0.1 Sec and 0.1rpm</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="81e4cf1e2c0443fce6ac8d8d2ce4f820" href="#summary">stop_stepper()</a></code></b>
				<p>	<pre>stepper speeding down in decel time to stop</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="44bef3ca3bc1ee6266c2ac214695fd56" href="#summary">coil_stepper(bit in data)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0e7967360822471823cd3c7a3c0dee3e" href="#summary">timer1()</a></code></b>
				<p>	<pre> Interupt Timer   =>  0.01Sec  --------------
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="fafbfc257a4de162e149e6e1a9d2e5a0" href="#summary">timer0()</a></code></b>
				<p>	<pre>   Interupt Timer 0  1 delay between steps   ------
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="61231433d9fe2a67da1480e31ec37208" href="#summary">run_stepper(word in data)</a></code></b>
				<p>	<pre>data in is velocity speed in 0.1Sec</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b07ed84b6891ee0a7742c33826ddd18e" href="#summary">hold_stepper()</a></code></b>
				<p>	<pre>steppermotor stop direct</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="ab92e0a58b3f384581604ea9459c8e56" href="#summary">_timer0_01s_off() </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b49ec2e5993c10098549e7f2b2ba1d5b" href="#summary">_timer0_01s_on() </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="befcbf4ab03fe99ee1045f63362ab3b3" href="#summary">_velocity(word in data)</a></code></b>
				<p>	<pre>sets new tmr1register for new velocity</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
		<i>No sample found</i>

			<br/>

            </div>
        </div>


	</body>
</html>

