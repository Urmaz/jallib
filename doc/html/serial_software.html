<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    </head>
    <body>
		        <div id="page">
        
            <div id="pagecontent">

			    
    <h1>serial_software</h1>

    <div>
		<font size="+1"><i>Software RS232 library</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Stef Mientki, Copyright (c) 2002..2006, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>software RS232 library
Library supports software RS232 send and receive procedure on any IO-pin.
Both the inverted and non-inverted routines are available, 
so it should fit any hardware.
Baudrate can be set between 110 and 230_400 (for 20 Mhz Xtal),
for lower Xtal frequencies the maximum baudrate will be equally lower.
Baudrates are optimized, so even the high baudrates shouldn't be a problem
(my [Stef] standard = 115_200 Baud, which has never given me any problems).
Interrupts should be disabled during transmissions.
Transmission parameters are 8 databits, 2 stopbits, no parity, no handshake.
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#a4029d13d97eec170a572df4963d4c30">const OL_TX  = ( _NINSTR / ( 3 * 255 )) + 1
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#305ae9864fece9875dc6226563da7e44">var byte ilval0
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#41a033b417b485454a255f4bb3653b7b">const _NINSTR2 = 5 + ( _NINSTR / 2)
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e0fd22f3508b2b69a96f9f5dcabbf387">var byte ilval
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#83d901c72b6f4efe3657809d5c825fed">var byte olval
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#70b0c80cd30139bced8c2568b08ec0cc">const _NINSTR = target_clock / (4 * serial_sw_baudrate)
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a970191bebdc9b1c93823accdb18e53b">const _IL_TX  = ( ( _NINSTR - ( 4 * OL_TX ) ) - 16 ) / ( 3 * OL_TX )
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f781336672e1bfe059650e1b707cddf4">var byte IL_TX = _IL_TX
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#50228dff5863dbf7f3999a387852c503">serial_sw_data'put(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f7d02c6bb41724416beb3db6b0f7a70c">serial_sw_write(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ee6af3bc909e15a958267109c308ad7b">serial_sw_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#341d6f59cd6dab9a01c05a3506aaf5bb">serial_sw_read_wait(byte out data)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1119eca945bd088d4fce785e5458112c">serial_sw_data'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#cebe105b7fc7e55b34fc70343c0d9858">serial_sw_read(byte out data) return bit</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="a4029d13d97eec170a572df4963d4c30" href="#summary">const OL_TX  = ( _NINSTR / ( 3 * 255 )) + 1
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="305ae9864fece9875dc6226563da7e44" href="#summary">var byte ilval0
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="41a033b417b485454a255f4bb3653b7b" href="#summary">const _NINSTR2 = 5 + ( _NINSTR / 2)
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e0fd22f3508b2b69a96f9f5dcabbf387" href="#summary">var byte ilval
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="83d901c72b6f4efe3657809d5c825fed" href="#summary">var byte olval
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="70b0c80cd30139bced8c2568b08ec0cc" href="#summary">const _NINSTR = target_clock / (4 * serial_sw_baudrate)
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a970191bebdc9b1c93823accdb18e53b" href="#summary">const _IL_TX  = ( ( _NINSTR - ( 4 * OL_TX ) ) - 16 ) / ( 3 * OL_TX )
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f781336672e1bfe059650e1b707cddf4" href="#summary">var byte IL_TX = _IL_TX
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="50228dff5863dbf7f3999a387852c503" href="#summary">serial_sw_data'put(byte in data)</a></code></b>
				<p>	<pre>
Here the serial_sw_write procedure is declared as a pseudo variable
so you can use it in the following way:
{{{
   serial_sw_write = 0x33
}}}
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f7d02c6bb41724416beb3db6b0f7a70c" href="#summary">serial_sw_write(byte in data)</a></code></b>
				<p>	<pre>Waits untill a character is received.
Interrupts will be disabled during this routine, but restored afterwards.
Also here the code is doubled (inverting and non-inverting)
and selection is done by a compiler-directive.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ee6af3bc909e15a958267109c308ad7b" href="#summary">serial_sw_init()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="341d6f59cd6dab9a01c05a3506aaf5bb" href="#summary">serial_sw_read_wait(byte out data)</a></code></b>
				<p>	<pre>Waits untill a character is received.
Interrupts will be disabled during this routine, but restored afterwards.
Also here the code is doubled (inverting and non-inverting)
and selection is done by a compiler-directive.
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1119eca945bd088d4fce785e5458112c" href="#summary">serial_sw_data'get() return byte</a></code></b>
				<p>	<pre>Here the serial_sw_read_wait procedure is declared as a pseudo variable
so you can use it in the following way
{{{
   Data = serial_sw_write
}}}
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="cebe105b7fc7e55b34fc70343c0d9858" href="#summary">serial_sw_read(byte out data) return bit</a></code></b>
				<p>	<pre>Waits untill a character is received or time out is reached.
Interrupts will be disabled during this routine, but restored afterwards.
Also here the code is doubled (inverting and non-inverting)
and selection is done by a compiler-directive.
</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/by_device/16f88/16f88_serial_sw_echo.jal" target="_blank">16f88_serial_sw_echo.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

