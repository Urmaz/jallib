<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>serial_hardware2 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="serial_hardware2">
    <h1>serial_hardware2</h1>
	</a>

    <div>
		<font size="+1"><i>USART2 hardware control</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Stef Mientki, Copyright (c) 2002..2006, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>USART2 hardware control.
Routines for sending and receiving through the EUSART2
(2nd EUSART module)
both asynchrone and synchrone are supported.
Baudrate can simply be set through a human constant,
because the baudrate depending registers are calculated by this unit.
Baudrate is calculated, starting at the high baudrate flag,
which will ensure the highest possible accuracy.
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="usart2_common.html">usart2_common</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#f2c449c901a3b349d0addcfe22d3e9d6">serial_hw2_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a58af043ef853dfb5c4b79f3ff380a54">serial_hw2_write(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1928d89df01bf36b5337d80e0fb382b6">serial_hw2_enable()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0e58978c970d78971c4b9b07b045d951">serial_hw2_data_raw'put(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3b72b7478dc97397055fae5ebacf79a5">serial_hw2_data'put(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#65aaa8b4b1373f82708dc094dc3821c3">serial_hw2_write_word(word in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#66f991a33b060a7dff227e213c978d7d">serial_hw2_disable()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#56c7b41153c000e6bd35811417c9face">serial_hw2_data_raw'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8f45aec108f8ed22138b205a7b99e980">serial_hw2_data'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#299d69335d97c6a0ae6b83c52cee3495">serial_hw2_read(byte out data) return bit</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#91b39ea987baa34f7030f7c41ad25885">_serial_hw2_read(byte out data) return bit</a></code></b>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="f2c449c901a3b349d0addcfe22d3e9d6" href="#summary">serial_hw2_init()</a></code></b>
				<p>	<pre>Initializes the serial port, calculates baudrate registers.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a58af043ef853dfb5c4b79f3ff380a54" href="#summary">serial_hw2_write(byte in data)</a></code></b>
				<p>	<pre>
Write char to serial port, blocking

Asynchronuous serial send routine, using the TX pin
Sends byte X (8 bit with no parity) to the serial port
First checks (and waits if necessary) if transmit buffer is empty

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1928d89df01bf36b5337d80e0fb382b6" href="#summary">serial_hw2_enable()</a></code></b>
				<p>	<pre>Enables USART
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0e58978c970d78971c4b9b07b045d951" href="#summary">serial_hw2_data_raw'put(byte in data)</a></code></b>
				<p>	<pre>These are real raw procedures, declared as pseudo variables
the user is totally responsible for testing the transmit/receive
flag before using these functions
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3b72b7478dc97397055fae5ebacf79a5" href="#summary">serial_hw2_data'put(byte in data)</a></code></b>
				<p>	<pre>Here Serial read and write are definied as pseudo variables
so you use them as normal vars, like
* wait for character being received,
* then echo the inverted character
{{{
serial_hw2_data = ! serial_hw2_data
}}}
these procedures will wait till they can perform their action
therefore it's better to use to following construct
{{{
 if charater received, echo the inverted character
if  serial_hw2_data_available then
serial_hw2_data = ! serial_hw2_data
end if
 do other things
}}}
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="65aaa8b4b1373f82708dc094dc3821c3" href="#summary">serial_hw2_write_word(word in data)</a></code></b>
				<p>	<pre>like Serial_H_write, but then with a word as input
The MSB is outputed first
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="66f991a33b060a7dff227e213c978d7d" href="#summary">serial_hw2_disable()</a></code></b>
				<p>	<pre>Disables USART so ports can be used (temporary) for other purposes.
USART can be enabled again by calling serial_hw2_enable()
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="56c7b41153c000e6bd35811417c9face" href="#summary">serial_hw2_data_raw'get() return byte</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8f45aec108f8ed22138b205a7b99e980" href="#summary">serial_hw2_data'get() return byte</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="299d69335d97c6a0ae6b83c52cee3495" href="#summary">serial_hw2_read(byte out data) return bit</a></code></b>
				<p>	<pre>
Read char if available (non-blocking)
   
Returns true if a character was received, otherwise returns false.
Overrun error flag is cleared.

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="91b39ea987baa34f7030f7c41ad25885" href="#summary">_serial_hw2_read(byte out data) return bit</a></code></b>
				<p>	<pre>
Internal use only!

(using this inline function for serial_hw2_data'get saves a stack level)
Returns true if a character was received, otherwise returns false.
Overrun error flag is cleared.

</pre>
</p>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>18f25k22</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f25k22_eusart2.jal" target="_blank">18f25k22_eusart2.jal</a></td>
			</tr>
			<tr>
			<td><b>18f27j53</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f27j53_pps_rx2tx2.jal" target="_blank">18f27j53_pps_rx2tx2.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

