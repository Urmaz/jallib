<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>glcd_ks0108 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="glcd_ks0108">
    <h1>glcd_ks0108</h1>
	</a>

    <div>
		<font size="+1"><i>glcd_ks0108 - Library for KS0108 compatible graphic LCDs</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Serkan Ayyýldýz Copyright (c) 2006..2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong, Rob Hamerling.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4o
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Library for KS0108 compatible graphic lcds with 128x64 resolution
             for example the GDM12864A.
</pre>

	</p>
	<br/>


	<b>Notes</b>
	<p>
		<pre>Modifications by Rob Hamerling (nov 2011):
       - slight timing changes in _ks0108_read() and _ks0108_write()
         according to datasheet schemes for MPU Write timing and Read timing.
         Replaced hard coded ASM NOPs by _usec_delay()
       - all private procedures/function prefixed with underscore
       - added procedure glcd_clear_screen() and use it in glcd_init()
       - replaced absolute values for loops and offsets by symbolic values
       - minor code optimisations, incl add/remove of some 'pragma inline'
       - comments: extended, corrected, aligned
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#7c5b16d4771f69d90685e97e2d98cddc">const byte GLCD_Y_PIXELS   = 64                    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4b1821db940cee53ad0489fc8fc487d4">const byte GLCD_COLOR_BITS = 1                     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9eaaede1315cb24ee51855d3851e5034">const KS0108_CMD_COLUMN    = 0x40</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6a889bb3d293c5c1431e02579d922ea7">var byte glcd_pen_color        = GLCD_BLACK        </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9201acaa504fcb66dce4a102c8894d09">const byte GLCD_X_PIXELS   = 128                   </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#cb74a2b91bc51a5a33fe4d1c3ea86b80">const KS0108_CMD_ON        = 0x3F</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#37be1338f464ecc375000faa154dff16">const KS0108_CMD_OFF       = 0x3E</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4e501a264741e7c3458e628a62272391">const KS0108_RIGHT         = 1</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b9e310f1716dad452eb446bace003ed5">var byte glcd_background_color = GLCD_WHITE        </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f170bcac04f0a4b6af1e480f56a89bdd">const byte GLCD_WHITE      = 0x00</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2c9bcd16b818f7d29f838fda134910d2">const byte _font_5x7_table[] = {</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3c520886fb07b8c7f0fb0addd7b74fae">const KS0108_CMD_TOP_RAM   = 0xC0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#50687cfd7af463a8f6fbe0f6f3a40617">const byte GLCD_BLACK      = 0x01</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e72aa00400c5a7d67a4f1fdab8caa256">const KS0108_CMD_PAGE      = 0xB8</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e04fc75357dffb207bc7cf99be70dac1">const KS0108_LEFT          = 0</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1478d5693380445f5dd3dfcf592166cb">glcd_fill(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a90656ff9ba9e67726ac1d048d3d43bc">glcd_clear_screen()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#67ff5280571c2d7518a4036a6ffb67bd">glcd_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#dbc2e970c42a2ecbbc859e8f778b85c3">glcd_write_pixel(byte in x, byte in y)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#800f3daf406bebdf66c379c0c43c4f74">glcd_write_char(byte in x, byte in y, byte in ch )</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#509b1ef94535d9596714b003f0f17a71">_ks0108_write_byte(byte in x, byte in y, byte in veri)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5e60dcd889721f2a5d15777fa59196a8">_ks0108_column(byte in side, byte in column)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6341589c365d75b9089494bafc2792e5">_ks0108_data()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2881d3982f5cda4c887154eca461a3ce">_ks0108_off()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#18c302e995a9ea9d7f26ed8e4533055a">_ks0108_write_char(byte in x, byte in y, byte in ch)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c077f1f68ad2cce9cee1f5734a50e468">_ks0108_write(byte in side, byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#234215a2c45170e2361b0d7ffe68ef3a">_ks0108_on()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#197fb42004184cebc4e9db0fed1207f9">_ks0108_page(byte in side, byte in page)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3b0b8a931fdb40096f59eb220a8b0370">_ks0108_inst()</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#95b3bf8f87b8df6e62f95722647d6ef3">_ks0108_read(byte in side) return byte </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#12905033a02ffa16b485f1cae7dc42d1">_ks0108_read_byte(byte in x, byte in y) return byte</a></code></b>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="7c5b16d4771f69d90685e97e2d98cddc" href="#summary">const byte GLCD_Y_PIXELS   = 64                    </a></code></b>
				<p>	<pre>) in number of pixels</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4b1821db940cee53ad0489fc8fc487d4" href="#summary">const byte GLCD_COLOR_BITS = 1                     </a></code></b>
				<p>	<pre>black & white (monochrome)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9eaaede1315cb24ee51855d3851e5034" href="#summary">const KS0108_CMD_COLUMN    = 0x40</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6a889bb3d293c5c1431e02579d922ea7" href="#summary">var byte glcd_pen_color        = GLCD_BLACK        </a></code></b>
				<p>	<pre>default pen color</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9201acaa504fcb66dce4a102c8894d09" href="#summary">const byte GLCD_X_PIXELS   = 128                   </a></code></b>
				<p>	<pre>) display dimensions</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="cb74a2b91bc51a5a33fe4d1c3ea86b80" href="#summary">const KS0108_CMD_ON        = 0x3F</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="37be1338f464ecc375000faa154dff16" href="#summary">const KS0108_CMD_OFF       = 0x3E</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4e501a264741e7c3458e628a62272391" href="#summary">const KS0108_RIGHT         = 1</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b9e310f1716dad452eb446bace003ed5" href="#summary">var byte glcd_background_color = GLCD_WHITE        </a></code></b>
				<p>	<pre>default background color</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f170bcac04f0a4b6af1e480f56a89bdd" href="#summary">const byte GLCD_WHITE      = 0x00</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2c9bcd16b818f7d29f838fda134910d2" href="#summary">const byte _font_5x7_table[] = {</a></code></b>
				<p>	<pre>
_font_5x7_table[] - character table

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3c520886fb07b8c7f0fb0addd7b74fae" href="#summary">const KS0108_CMD_TOP_RAM   = 0xC0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="50687cfd7af463a8f6fbe0f6f3a40617" href="#summary">const byte GLCD_BLACK      = 0x01</a></code></b>
				<p>	<pre>constant colors
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e72aa00400c5a7d67a4f1fdab8caa256" href="#summary">const KS0108_CMD_PAGE      = 0xB8</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e04fc75357dffb207bc7cf99be70dac1" href="#summary">const KS0108_LEFT          = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1478d5693380445f5dd3dfcf592166cb" href="#summary">glcd_fill(byte in data)</a></code></b>
				<p>	<pre>
Purpose:    Fill the GLCD screen with a pixel pattern
Arguments:  bit pattern (8 pixel column, usually 0x00 or 0xFF)
Notes:      Uses to auto-increment of x-coordinate for fast write of rows

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a90656ff9ba9e67726ac1d048d3d43bc" href="#summary">glcd_clear_screen()</a></code></b>
				<p>	<pre>
Purpose:    Clear the screen, set cursor position to upper left corner
Arguments:  none
Notes:      Uses current glcd_background_color setting as fill character

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="67ff5280571c2d7518a4036a6ffb67bd" href="#summary">glcd_init()</a></code></b>
				<p>	<pre>
Purpose:   Initialize the graphic LCD.
Arguments: none
Notes:     to be called before using any other GLCD function.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="dbc2e970c42a2ecbbc859e8f778b85c3" href="#summary">glcd_write_pixel(byte in x, byte in y)</a></code></b>
				<p>	<pre>
Purpose:    write (modify) a single pixel of the display
Arguments:  - x-coordinate of the pixel
 y-coordinate of the pixel (will be converted to page number)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="800f3daf406bebdf66c379c0c43c4f74" href="#summary">glcd_write_char(byte in x, byte in y, byte in ch )</a></code></b>
				<p>	<pre>
Same as _ks0108_write_char, but uses external font.
Arguments: - x-coordinate (in pixels) of left most pixel columm (range 0..127)
 y-coordinate (in pixels) of upper most pixel-row (range 0..63)
Note: will be rounded down to a multiple of 8 ('page' boundary)
 character (binary value in range 32..122)
Notes:     For characters the display is 8 lines, each 8 bits high;
specify for y-coordinate a multiple of 8.

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="509b1ef94535d9596714b003f0f17a71" href="#summary">_ks0108_write_byte(byte in x, byte in y, byte in veri)</a></code></b>
				<p>	<pre>
Putpose:   write byte (column of pixels) to display
Arguments: - x-coordinate of the pixel
 y-coordinate of the pixel (will be converted to page number)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5e60dcd889721f2a5d15777fa59196a8" href="#summary">_ks0108_column(byte in side, byte in column)</a></code></b>
				<p>	<pre>
Purpose:    Set the column address
Arguments:  The column address (x-coordinate: 0..63)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6341589c365d75b9089494bafc2792e5" href="#summary">_ks0108_data()</a></code></b>
				<p>	<pre>
Purpose:   Specify subsequent reads and writes are data
Arguments: none

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2881d3982f5cda4c887154eca461a3ce" href="#summary">_ks0108_off()</a></code></b>
				<p>	<pre>
Purpose:   turn the display off
Arguments: none
Notes:     both sides are de-activated

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="18c302e995a9ea9d7f26ed8e4533055a" href="#summary">_ks0108_write_char(byte in x, byte in y, byte in ch)</a></code></b>
				<p>	<pre>
Putpose:   Write character to the display using internal font definition.
Arguments: - x- and y-coordinates (upper left corner of character pattern)
 character to display
Notes:     For characters the display is 8 lines, each 8 bits high;
specify for y-coordinate a multiple of 8.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c077f1f68ad2cce9cee1f5734a50e468" href="#summary">_ks0108_write(byte in side, byte in data)</a></code></b>
				<p>	<pre>
Purpose:   Write a byte of data to the specified chip
Arguments: - side (which chip to write the data to: 0 = left, 1 = right)
 data (the byte of data to write)
Notes:     GLCD_E is set low for 1/4 cycle upon call and kept low
for 1/4 cycle before returning such that successive calls
to read or write have GLCD_E low for at least 1/2 cycle
between calls.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="234215a2c45170e2361b0d7ffe68ef3a" href="#summary">_ks0108_on()</a></code></b>
				<p>	<pre>
Purpose:   turn the display on
Arguments: none
Notes:     both sides are activated

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="197fb42004184cebc4e9db0fed1207f9" href="#summary">_ks0108_page(byte in side, byte in page)</a></code></b>
				<p>	<pre>
Purpose:   Set the page number
Arguments: - side (selected chip, 0 = left, 1 = right)
 page number (y-coordinate: 0..7)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3b0b8a931fdb40096f59eb220a8b0370" href="#summary">_ks0108_inst()</a></code></b>
				<p>	<pre>
Purpose:   Specify subsequent reads and writes are instructions
Arguments: none

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="95b3bf8f87b8df6e62f95722647d6ef3" href="#summary">_ks0108_read(byte in side) return byte </a></code></b>
				<p>	<pre>
Purpose:   Reads a byte of data from the specified chip
Arguments: side (which chip to read, 0 = left, 1 = right)
returns:   A byte of data read from the chip (vertical row of 8 pixels)
at current position (to be set previously).
Notes:     GLCD_E is set low for 1/4 cycle upon call and kept low
for 1/4 cycle before returning such that successive calls
to read or write have GLCD_E low for at least 1/2 cycle
between calls.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="12905033a02ffa16b485f1cae7dc42d1" href="#summary">_ks0108_read_byte(byte in x, byte in y) return byte</a></code></b>
				<p>	<pre>
Purpose:    read byte (column of pixels) from display
Arguments:  x = pixel column
y = pixel row (will be converted to page number)
Returns:    byte, row of pixels on current location

</pre>
</p>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_glcd_ks0108.jal" target="_blank">16f877a_glcd_ks0108.jal</a></td>
			</tr>
			<tr>
			<td><b>18f6310</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f6310_glcd_ks0108.jal" target="_blank">18f6310_glcd_ks0108.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

