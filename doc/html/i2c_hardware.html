<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>i2c_hardware - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="i2c_hardware">
    <h1>i2c_hardware</h1>
	</a>

    <div>
		<font size="+1"><i>i2c_hardware</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Stef Mientki, Copyright (C) 2005 Stef Mientki
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Joep Suijs, Albert Faber
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4g
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Hardware implementation of I2C (single) master.





 Define i2c pins like:
alias i2c_scl            is pin_c3  ; optional, but good habit ;)
alias i2c_scl_direction  is pin_c3_direction
alias i2c_sda            is pin_c4  ; optional, but good habit ;)
alias i2c_sda_direction  is pin_c4_direction



const word _i2c_bus_speed = 1 ; * 100kHz
const bit _i2c_level = true   ; i2c levels (not SMB)
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1a54920052fc3e15f2264743deef3998">const _i2c_100khz = (target_clock / (4 *  100_000)) - 1</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#30018ec779e74a02f081c7a8812a6393">const _i2c_400khz = (target_clock / (4 *  400_000)) - 1</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2fda4ea51103ade8f4aaec8fa336c114">const _i2c_1mhz   = (target_clock / (4 * 1000_000)) - 1</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#8da7dc9dfdc20096b83b18fbf7f0f3b6">i2c_restart()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f987b6291650bad29cb7324b169956a6">i2c_initialize()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2f0cebb54da62e4f6c61ba4b1cda726a">i2c_stop()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4c49ee2eabee86f03b1a23575b8e2e4a">i2c_start()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#a532e4e8d42f23731d631bd1c269f5f1">i2c_receive_byte(bit in ACK ) return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8f19b4c1689f080bca33562068691ad4">i2c_transmit_byte(byte in data) return bit</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1a54920052fc3e15f2264743deef3998" href="#summary">const _i2c_100khz = (target_clock / (4 *  100_000)) - 1</a></code></b>
				<p>	<pre>
some constants needed for the baudrate generator

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="30018ec779e74a02f081c7a8812a6393" href="#summary">const _i2c_400khz = (target_clock / (4 *  400_000)) - 1</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2fda4ea51103ade8f4aaec8fa336c114" href="#summary">const _i2c_1mhz   = (target_clock / (4 * 1000_000)) - 1</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="8da7dc9dfdc20096b83b18fbf7f0f3b6" href="#summary">i2c_restart()</a></code></b>
				<p>	<pre>
i2c_restart - Sends Restart bit and waits untill finished

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f987b6291650bad29cb7324b169956a6" href="#summary">i2c_initialize()</a></code></b>
				<p>	<pre>
if the device has changed, change the speed if necessary

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2f0cebb54da62e4f6c61ba4b1cda726a" href="#summary">i2c_stop()</a></code></b>
				<p>	<pre>
i2c_stop - Sends Stop bit and waits until finished

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4c49ee2eabee86f03b1a23575b8e2e4a" href="#summary">i2c_start()</a></code></b>
				<p>	<pre>
i2c_start - Sends Start bit and waits untill finished

</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="a532e4e8d42f23731d631bd1c269f5f1" href="#summary">i2c_receive_byte(bit in ACK ) return byte</a></code></b>
				<p>	<pre>
i2c_receive_byte -

start receiving of a byte and waits till finished
if param ACK is true, the byte is acknowledged and next bytes can be received.
if param ACK is false, the byte is nacked and a stop *should be* sent.
note: this behavior is inverted from the line level and orignal library, but
consistent with the i2c_software library.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8f19b4c1689f080bca33562068691ad4" href="#summary">i2c_transmit_byte(byte in data) return bit</a></code></b>
				<p>	<pre>
i2c_transmit_byte -


</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_i2c_hw_l0.jal" target="_blank">16f877_i2c_hw_l0.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_i2c_hw_l1.jal" target="_blank">16f877_i2c_hw_l1.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_i2c_hw_l0.jal" target="_blank">16f877a_i2c_hw_l0.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_rtc_pcf8563.jal" target="_blank">16f877a_rtc_pcf8563.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_ds1307_hw.jal" target="_blank">16f877a_ds1307_hw.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_i2c_hw_l1.jal" target="_blank">16f877a_i2c_hw_l1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_i2c_hw_l1.jal" target="_blank">18f14k50_i2c_hw_l1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_i2c_hw_l0.jal" target="_blank">18f14k50_i2c_hw_l0.jal</a></td>
			</tr>
			<tr>
			<td><b>18f25k22</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f25k22_i2c_hw_master_echo.jal" target="_blank">18f25k22_i2c_hw_master_echo.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_i2c_hw_l0.jal" target="_blank">18f2620_i2c_hw_l0.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_i2c_hw_l1.jal" target="_blank">18f2620_i2c_hw_l1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_i2c_hw_l1.jal" target="_blank">18f4550_i2c_hw_l1.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_i2c_hw_l0.jal" target="_blank">18f4550_i2c_hw_l0.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

