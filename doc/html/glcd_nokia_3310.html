<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>glcd_nokia_3310 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="glcd_nokia_3310">
    <h1>glcd_nokia_3310</h1>
	</a>

    <div>
		<font size="+1"><i>library for GLCD with pcd8544 controller used in Nokia 3310</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Andre Miller Copyright (c) 2008..2010, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Richard Zengerink, Sebastien Lelong, Paul D'haene
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4n
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>library for Nokia 3310 display with pcd8544 controller
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>http://www.amontec.com/lcd_nokia_3310.shtml
</pre>

	</p>
	<br/>

	<b>Notes</b>
	<p>
		<pre>cache usage has bugs, only half of screen is considered...
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="delay.html">delay</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#780bb456f2faa999b561c4f3c485d252">const byte GLCD_X_PIXELS = 84</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#40510c78e876f0ac35d9c5144e90e94e">const GLCD_WHITE = 0xFF</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f53a7c38e71b70715654faede566914f">const GLCD_XOR = 0x01</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0c90d15793947614ed7168cf0871bf18">var byte glcd_background_color = GLCD_WHITE</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#836e19b8bc69d4d10ba5764bba73f4f2">var word glcd_lo_watermark = cache_size - 1</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#22216771ba0e3a50b845e69b00044e63">const byte GLCD_Y_PIXELS = 48</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2ede3fe009bde80d8181353b1bd2db8f">var byte glcd_pen_color = GLCD_BLACK</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0110155d5345778ab4cfe56aac55e747">const byte GLCD_COLOR_BITS = 1 </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#dd0b94bad3666983dd24ae82a9ea63a7">var word glcd_hi_watermark = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#be46bc9de380233e7fbda7a3e8ea5959">var bit glcd_cache_changed = true</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7fbc77a36393522210c4aac1080d9fa5">const word CACHE_SIZE = GLCD_X_PIXELS * (GLCD_Y_PIXELS/8)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#584fc048a9b386032e348b873a251d94">const GLCD_BLACK = 0x00</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#347cc0e24ffc75314480aee61a499381">nokia_contrast(byte in contrast)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#81b059f03587506de1830319b418472c">nokia_goto(byte in x, byte in y)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#aecb6e58da5660f8ab04577810aea8b8">nokia_clear_screen()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#dbc2e970c42a2ecbbc859e8f778b85c3">glcd_write_pixel(byte in x, byte in y)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ee6b27f04231ea53160f72d0f182f1f2">graphic_to_nokia(byte in graph[])</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#99f9fb23428ec429b4f48a01a7031f2b">nokia_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9df65ded39d315156a5ee806ce5c697c">glcd_cache_update()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#515cee90ce7041c780d85badfe40bae3">glcd_clear_cache()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#46f3e638d60d5a7aec4d14dab090ddf1">glcd_write_char(byte in x, byte in y, byte in char)</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#6a57e458d2040b3e8359580f9ba5df94">_nokia_glcd_write(byte in value)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#db4a911eab5ae2021ba4b77107c0a2c7">_nokia_glcd_write_command(byte in value)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3de715500246fe8c952a5e9d12fd1de1">_nokia_glcd_write_data(byte in value)</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="780bb456f2faa999b561c4f3c485d252" href="#summary">const byte GLCD_X_PIXELS = 84</a></code></b>
				<p>	<pre>GLCD specifications
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="40510c78e876f0ac35d9c5144e90e94e" href="#summary">const GLCD_WHITE = 0xFF</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f53a7c38e71b70715654faede566914f" href="#summary">const GLCD_XOR = 0x01</a></code></b>
				<p>	<pre>this color is a special, internal to this library (not part
of controller specs). When using this color, what's black becomes
white (off), what's white becomes black (on)
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0c90d15793947614ed7168cf0871bf18" href="#summary">var byte glcd_background_color = GLCD_WHITE</a></code></b>
				<p>	<pre>Default background color
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="836e19b8bc69d4d10ba5764bba73f4f2" href="#summary">var word glcd_lo_watermark = cache_size - 1</a></code></b>
				<p>	<pre>track current changed (dirty) area
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="22216771ba0e3a50b845e69b00044e63" href="#summary">const byte GLCD_Y_PIXELS = 48</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2ede3fe009bde80d8181353b1bd2db8f" href="#summary">var byte glcd_pen_color = GLCD_BLACK</a></code></b>
				<p>	<pre>Default pen color
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0110155d5345778ab4cfe56aac55e747" href="#summary">const byte GLCD_COLOR_BITS = 1 </a></code></b>
				<p>	<pre>monochrome display</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="dd0b94bad3666983dd24ae82a9ea63a7" href="#summary">var word glcd_hi_watermark = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="be46bc9de380233e7fbda7a3e8ea5959" href="#summary">var bit glcd_cache_changed = true</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7fbc77a36393522210c4aac1080d9fa5" href="#summary">const word CACHE_SIZE = GLCD_X_PIXELS * (GLCD_Y_PIXELS/8)</a></code></b>
				<p>	<pre>Cache definition
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="584fc048a9b386032e348b873a251d94" href="#summary">const GLCD_BLACK = 0x00</a></code></b>
				<p>	<pre>colors constants
black & white are official value for display controller
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="347cc0e24ffc75314480aee61a499381" href="#summary">nokia_contrast(byte in contrast)</a></code></b>
				<p>	<pre>Set display contrast
contrast -> value from 0x00 to 0x7F
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="81b059f03587506de1830319b418472c" href="#summary">nokia_goto(byte in x, byte in y)</a></code></b>
				<p>	<pre>Set the current position for data (x = 0->83, y = 0->5)
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="aecb6e58da5660f8ab04577810aea8b8" href="#summary">nokia_clear_screen()</a></code></b>
				<p>	<pre>Clear the LCD data memory
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="dbc2e970c42a2ecbbc859e8f778b85c3" href="#summary">glcd_write_pixel(byte in x, byte in y)</a></code></b>
				<p>	<pre>Plot a pixel at given absolute (x, y) location.
x, y -> Absolute pixel coordinates
glcd_pen_color should be set before calling, to plot 
appropriate pixel colors.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ee6b27f04231ea53160f72d0f182f1f2" href="#summary">graphic_to_nokia(byte in graph[])</a></code></b>
				<p>	<pre>prints any bitmap graphics (for instance created with fastLCD
http://www.amontec.com/lcd_nokia_3310.shtml) to lcd
just create: const byte graphic[] = { graphic max 504 bytes} and call
graphic_to_nokia( graphic)
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="99f9fb23428ec429b4f48a01a7031f2b" href="#summary">nokia_init()</a></code></b>
				<p>	<pre>Send LCD initialization commands
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9df65ded39d315156a5ee806ce5c697c" href="#summary">glcd_cache_update()</a></code></b>
				<p>	<pre>Copy the changed area of the cache to the lcd.
Call this procedure after writing to cache.
When the glcd_cache_changed flag has not been set, lcd_cache_update simply
returns. Only the cache between the low & high watermark pointers is
updated
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="515cee90ce7041c780d85badfe40bae3" href="#summary">glcd_clear_cache()</a></code></b>
				<p>	<pre>Clear the display. glcd_cache_update must be called next.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="46f3e638d60d5a7aec4d14dab090ddf1" href="#summary">glcd_write_char(byte in x, byte in y, byte in char)</a></code></b>
				<p>	<pre>write a char at position (x,y), using font previously selected with
glcd_font_use(FONT_ID). Honor glcd_background_color variable, and indirectly
glcd_pen_color, such as:
   * glcd_background_color can be GLCD_BLACK. If so, pen color will be white (inverted)
   * if glcd_background_color isn't GLCD_BLACK, then background color will be white, and
     pen color will be white ("normal").
when using glcd_common library, a glcd'put pseudo-variable will be defined,
and be called as an output device (eg. glcd = "x")
</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="6a57e458d2040b3e8359580f9ba5df94" href="#summary">_nokia_glcd_write(byte in value)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="db4a911eab5ae2021ba4b77107c0a2c7" href="#summary">_nokia_glcd_write_command(byte in value)</a></code></b>
				<p>	<pre>Write a command byte to the LCD
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3de715500246fe8c952a5e9d12fd1de1" href="#summary">_nokia_glcd_write_data(byte in value)</a></code></b>
				<p>	<pre>Write a data byte to the LCD
</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_nokia_3310_font.jal" target="_blank">18f4550_nokia_3310_font.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_nokia_3310_sprite.jal" target="_blank">18f4550_nokia_3310_sprite.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_nokia_3310_gfx.jal" target="_blank">18f4550_nokia_3310_gfx.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_nokia_3310_pixel.jal" target="_blank">18f4550_nokia_3310_pixel.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

