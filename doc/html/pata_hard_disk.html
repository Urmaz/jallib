<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>pata_hard_disk - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="pata_hard_disk">
    <h1>pata_hard_disk</h1>
	</a>

    <div>
		<font size="+1"><i>Hard disk library for communicating with parallel ata hard drives</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Matthew Schinkel - borntechi.com, copyright (c) 2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4k
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>this library provides functions for pata/ide hard disk drives.
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>"connecting ide drives by tilmann reh" - http://www.gaby.de/gide/IDE-TCJ.txt
IDE hardware reference & information document by alex t. ivopol
ATA Attachement with Packet Interface 6 - d1410r3-ATA-ATAPI-6.pdf
</pre>

	</p>
	<br/>

	<b>Notes</b>
	<p>
		<pre>- If you are not using Alternate Status, Digital Output or Drive Address registers
         pins cs1 & cs0 can be saved by connecting these ide pins to cs0-high, cs1-low
         at ide connector. normal operation does not require these pins. Set
         "CONST BYTE PATA_HD_USE_CS0_CS1_PINS = TRUE" if you will be using
         these registers
       - You MUST write full sectors of 512 bytes.
       - this lib does not do error checking
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#c77f1ee295bec7090b46c28c1110e364">var byte pata_hd_sector_buffer_low[256] </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8230e192fb1adccdbabbbf8043649528">const SD_CARD = 1</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5fa73870a65ae7af66c428dad642568b">const PATA_HD_SPIN_UP = 0xE1         </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ccd0d095de3e85ed3ae4288c6ca4768b">const PATA_HARD_DISK = 0            </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e9bbb0e070c5499e24352e7ddd2c9d94">const PATA_HD_CYL_LOW_REG = 12    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d623dab26781b8b5dfc7f3be0402aae4">var byte pata_hd_sector_count2 = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5eee7d4458ca3036bd5fe1943c89c042">const PATA_HD_SEC_NUM_REG = 11    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e2851469d7aaabdad1a34a4ef718a3ac">const PATA_HD_DATA_REG = 8        </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1a8b49733d2832000fb53fe55ca8553b">var dword pata_hd_prev_address = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ead712b08225d90462e66a63597fbed4">var dword pata_hd_last_sector</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4154ddf19c119fd7ecc24e06af9acdf3">var bit pata_hd_last_operation</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8e31b08be137ad673826664f695c7d0f">const PATA_HD_IDENTIFY_DRIVE = 0xEC  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6abbc70500efdd493ddb8b55d08dc5de">const PATA_HD_STATUS_REG = 15     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d8e88194660317277f49be9d298c019b">const PATA_HD_CYL_HIGH_REG = 13   </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#30a34a5a0f3300aea4b70a26b5a29b3f">const PATA_HD_READ_SECTORS = 0x20     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0dbee8fe090e17d6c7079afb0b9fd0f1">const PATA_HD_COMMAND_REG = 15    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#703543175e06b114e5366f0c2bcd32d9">var bit pata_hd_byte_location = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#741c94ea1d356c08c1a46288b123b7ec">const DATA_MEDIA = PATA_HARD_DISK</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8ccc6163f1b2ca161dd26bb31ef43c65">const bit PATA_HD_READ = 0  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c23a21d3f89888cadd54e0cb8554deff">var byte pata_hd_sector_buffer_high[256] </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a4fe951ead606ce70f52837daa94b9e3">const PATA_HD_SDH_REG = 14        </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#39077a60ab119982d75a536ceb8c8b7e">const bit PATA_HD_WAIT_READ = 0  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8aadf17fcddbe781d058218b4e78a8c0">const bit PATA_HD_WAIT_WRITE = 1 </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b3bf5b6ead8dff04c38662595cb4483b">const PATA_HD_DODC_REG = 16       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e344d6205f234c2134c55c258de1266c">const PATA_HD_SEC_COUNT_REG = 10  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#af4d0c1a55cc8c3dc46c38fb7099d7de">const PATA_HD_PRECOMP_REG = 9     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c18c2bee9a1be33f847d4ac0fc56d7dd">const PATA_HD_ALT_STATUS_REG = 16 </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ebd0eca47241cc96a92c8c283f81c588">const PATA_HD_ADDRESS_REG = 17    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#31bccb533bfd94896c881879461fb13e">const PATA_HD_SPIN_DOWN = 0xE0       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#09aed5f4df6722c588ef951cb5ada5b7">const PATA_HD_WRITE_SECTORS = 0x30    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5e242aeb8a2d792b1fe39adfebfc8176">const bit PATA_HD_WRITE = 1 </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#da8cf5c824fcba8dbc659ea189ed6939">const PATA_HD_RECALIBRATE = 0x10     </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1959a98ece961ac42d78363ebf3a5b51">var byte pata_hd_high_byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9de2d6e25b8a25f02d3c15c9ed3ac3d1">var byte pata_hd_word_count = 0    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#03d2cfc649b046772c37549a9a25c08f">var dword pata_hd_sector_select = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#26b6de5d59b97cb9c6385a95d10443c2">var byte pata_hd_sector_count = 0  </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2cb5f4e2e9484056c221360f76e03f84">const PATA_HD_ERROR_REG = 9       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#522ad1c04ea879065495b1037abb308d">var byte pata_hd_high_byte2</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a18cd5467cc3939703228002547519d7">var dword pata_hd_current_address = 0xFF_FF_FF_FF</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#2cc026f524f9d2d1fcc6175e73b36906">pata_hd_write_pulse( byte in z )</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2f344287231345b00679035d0b7d02fb">pata_hd_read_data(byte out low_byte, byte out high_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7778fd0dda75964f69332f932cc29522">pata_hd_read_pulse(dword in amount)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f5a33c6b73a007281b17e2afa09c1682">pata_hd_register_read(byte in register, byte out low_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#36159ddfc4160d4737d38469489e5df2">pata_hd_register_write(byte in register, byte in low_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4b35bb2d479fd5c7cd29d344feaa88ea">pata_hd_set_address(byte in pata_hd_head_addr, byte in cyl_high_addr, byte in cyl_low_addr, byte in sec_num_addr, byte in sec_count)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a4868bd93d9544f521f51c167e6dfb40">pata_hd_write_data(byte in low_byte, byte in high_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0280eab0a058bb933a6b1d18b8077de8">pata_hd_write_sector_address(dword in address)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e1ac1c30d996fc9c8eb5b3d081e0db03">pata_hd_read_sector_address(dword in address)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#818828ef1d1690e72a7dcd9553fa88fc">pata_hd_print_sector(volatile byte out device, dword in address)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0557c1bff61d4543a91cc0271d93b429">pata_hd_read_sector()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7c568a6027eb73629f92762e6ad37dc7">pata_hd_write_to_sector_end(byte in input_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#22fa0e55f459112be01811257c5b6b35">pata_hd_data_byte'put(byte in data_byte)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9ac9e981ffd431cc6c1243b187863799">pata_hd_busy()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c662dbd97469b20aea73b5920f8a8cd4">pata_hd_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f163bcee9e346e6fbe955f58eff9839d">pata_hd_data_request(bit in read_write)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e91cde2bc2dc0e2c364c9133f069d429">pata_hd_stop_write()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9877b7b289008b18dc7ff2e32a875fac">pata_hd_select_register(byte in register)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c3b40a66cbf726e526105c24fbbb43f7">pata_hd_delay_100ns()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1e2d76d67849cda65e0520cde39740fb">pata_hd_write_sector()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3a8783fa503c9efd045f834c3321803c">pata_hd_read_pulse_byte(dword in z)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#81aaab7a347c3bb27f1a3347064b77b2">pata_hd_start_read(dword in address)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#744693aaf15fea55f9ddc31fce8fe8e0">pata_hd_set_idle()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0142f0b801ab367911b76a7916e6db10">pata_hd_go_to_sector(dword in sector, byte in sec_count)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#310fd9f31d7afe3e6c82428df9abd6ad">pata_hd_drive_ready()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#093fbb413b8db1263710db064ff81301">pata_hd_print_sector_hex(volatile byte out device,word in bytes_per_line,dword in address)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#97f563d89a3847486082f2c4e630758d">pata_hd_sector_buffer'put(word in address, byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#647d825ea4fcf8079aa272fd94e12d7c">pata_hd_write_pulse_byte(dword in z)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2dfdd0724635d073097468f0229a4327">pata_hd_stop_read()</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#3494825bdac8a8ba8671ef14c29569ae">_pata_read_512()</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#4121a1d447dffa1b09b90f4e90856919">pata_hd_data_byte'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#86bbc7510897b1a4437bf84295926430">pata_hd_number_of_sectors'get() return dword</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#abc6afe8a6ae5c0a5124897c5e48cbe6">pata_hd_sector_buffer'get(word in address) return byte</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="c77f1ee295bec7090b46c28c1110e364" href="#summary">var byte pata_hd_sector_buffer_low[256] </a></code></b>
				<p>	<pre>
define the sector buffer. Can be read as pata_hd_sector_buffer[0-511]

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8230e192fb1adccdbabbbf8043649528" href="#summary">const SD_CARD = 1</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5fa73870a65ae7af66c428dad642568b" href="#summary">const PATA_HD_SPIN_UP = 0xE1         </a></code></b>
				<p>	<pre>turn on the drive's motor</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ccd0d095de3e85ed3ae4288c6ca4768b" href="#summary">const PATA_HARD_DISK = 0            </a></code></b>
				<p>	<pre>data media constants for fat32 lib</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e9bbb0e070c5499e24352e7ddd2c9d94" href="#summary">const PATA_HD_CYL_LOW_REG = 12    </a></code></b>
				<p>	<pre>cylinder low</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d623dab26781b8b5dfc7f3be0402aae4" href="#summary">var byte pata_hd_sector_count2 = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5eee7d4458ca3036bd5fe1943c89c042" href="#summary">const PATA_HD_SEC_NUM_REG = 11    </a></code></b>
				<p>	<pre>sector number</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e2851469d7aaabdad1a34a4ef718a3ac" href="#summary">const PATA_HD_DATA_REG = 8        </a></code></b>
				<p>	<pre>readable/writeable registers
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1a8b49733d2832000fb53fe55ca8553b" href="#summary">var dword pata_hd_prev_address = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ead712b08225d90462e66a63597fbed4" href="#summary">var dword pata_hd_last_sector</a></code></b>
				<p>	<pre>
read one entire sector at address. no need for start_read/stop_read

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4154ddf19c119fd7ecc24e06af9acdf3" href="#summary">var bit pata_hd_last_operation</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8e31b08be137ad673826664f695c7d0f" href="#summary">const PATA_HD_IDENTIFY_DRIVE = 0xEC  </a></code></b>
				<p>	<pre>read drive info such as make/modem/sn/drive size</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6abbc70500efdd493ddb8b55d08dc5de" href="#summary">const PATA_HD_STATUS_REG = 15     </a></code></b>
				<p>	<pre>status register  (creates interupt)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d8e88194660317277f49be9d298c019b" href="#summary">const PATA_HD_CYL_HIGH_REG = 13   </a></code></b>
				<p>	<pre>cylinder high</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="30a34a5a0f3300aea4b70a26b5a29b3f" href="#summary">const PATA_HD_READ_SECTORS = 0x20     </a></code></b>
				<p>	<pre>reads data from sector(s)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0dbee8fe090e17d6c7079afb0b9fd0f1" href="#summary">const PATA_HD_COMMAND_REG = 15    </a></code></b>
				<p>	<pre>command register</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="703543175e06b114e5366f0c2bcd32d9" href="#summary">var bit pata_hd_byte_location = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="741c94ea1d356c08c1a46288b123b7ec" href="#summary">const DATA_MEDIA = PATA_HARD_DISK</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8ccc6163f1b2ca161dd26bb31ef43c65" href="#summary">const bit PATA_HD_READ = 0  </a></code></b>
				<p>	<pre>wait for sector buffer to fill it's contents with data from disk platters</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c23a21d3f89888cadd54e0cb8554deff" href="#summary">var byte pata_hd_sector_buffer_high[256] </a></code></b>
				<p>	<pre>256 high bytes</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a4fe951ead606ce70f52837daa94b9e3" href="#summary">const PATA_HD_SDH_REG = 14        </a></code></b>
				<p>	<pre>sector/drive/head register</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="39077a60ab119982d75a536ceb8c8b7e" href="#summary">const bit PATA_HD_WAIT_READ = 0  </a></code></b>
				<p>	<pre>other constants
used for pata_hd_data_request()
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8aadf17fcddbe781d058218b4e78a8c0" href="#summary">const bit PATA_HD_WAIT_WRITE = 1 </a></code></b>
				<p>	<pre>wait for sector buffer to empty it's contents to disk platters</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b3bf5b6ead8dff04c38662595cb4483b" href="#summary">const PATA_HD_DODC_REG = 16       </a></code></b>
				<p>	<pre>digital output / device control</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e344d6205f234c2134c55c258de1266c" href="#summary">const PATA_HD_SEC_COUNT_REG = 10  </a></code></b>
				<p>	<pre>sector count</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="af4d0c1a55cc8c3dc46c38fb7099d7de" href="#summary">const PATA_HD_PRECOMP_REG = 9     </a></code></b>
				<p>	<pre>writeable registers
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c18c2bee9a1be33f847d4ac0fc56d7dd" href="#summary">const PATA_HD_ALT_STATUS_REG = 16 </a></code></b>
				<p>	<pre>alternate status (no interupt)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ebd0eca47241cc96a92c8c283f81c588" href="#summary">const PATA_HD_ADDRESS_REG = 17    </a></code></b>
				<p>	<pre>drive address</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="31bccb533bfd94896c881879461fb13e" href="#summary">const PATA_HD_SPIN_DOWN = 0xE0       </a></code></b>
				<p>	<pre>turn off the drive's motor</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="09aed5f4df6722c588ef951cb5ada5b7" href="#summary">const PATA_HD_WRITE_SECTORS = 0x30    </a></code></b>
				<p>	<pre>write data to sector(s)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5e242aeb8a2d792b1fe39adfebfc8176" href="#summary">const bit PATA_HD_WRITE = 1 </a></code></b>
				<p>	<pre>wait for sector buffer to empty it's contents to disk platters</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="da8cf5c824fcba8dbc659ea189ed6939" href="#summary">const PATA_HD_RECALIBRATE = 0x10     </a></code></b>
				<p>	<pre>common commands for command register:
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1959a98ece961ac42d78363ebf3a5b51" href="#summary">var byte pata_hd_high_byte</a></code></b>
				<p>	<pre>
Write one byte to disk pseudo var

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9de2d6e25b8a25f02d3c15c9ed3ac3d1" href="#summary">var byte pata_hd_word_count = 0    </a></code></b>
				<p>	<pre>other vars
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="03d2cfc649b046772c37549a9a25c08f" href="#summary">var dword pata_hd_sector_select = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="26b6de5d59b97cb9c6385a95d10443c2" href="#summary">var byte pata_hd_sector_count = 0  </a></code></b>
				<p>	<pre>counds sectors read, must be a byte.</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2cb5f4e2e9484056c221360f76e03f84" href="#summary">const PATA_HD_ERROR_REG = 9       </a></code></b>
				<p>	<pre>readable registers
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="522ad1c04ea879065495b1037abb308d" href="#summary">var byte pata_hd_high_byte2</a></code></b>
				<p>	<pre>
Read one byte (pseudo var)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a18cd5467cc3939703228002547519d7" href="#summary">var dword pata_hd_current_address = 0xFF_FF_FF_FF</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="2cc026f524f9d2d1fcc6175e73b36906" href="#summary">pata_hd_write_pulse( byte in z )</a></code></b>
				<p>	<pre>
Send a number of write pulses to data register sending 0's as data.
Used to get to the end of a sector or to get to a certain
location in a sector.
Increment pata_hd_word_count

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2f344287231345b00679035d0b7d02fb" href="#summary">pata_hd_read_data(byte out low_byte, byte out high_byte)</a></code></b>
				<p>	<pre>
Read two bytes from disk.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7778fd0dda75964f69332f932cc29522" href="#summary">pata_hd_read_pulse(dword in amount)</a></code></b>
				<p>	<pre>
Send a number of read pulses to data register without getting any data.
Goes forward 2 bytes per amount
Used to get to the end of a sector or to get to a certain
location in a sector.
Increment pata_hd_word_count

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f5a33c6b73a007281b17e2afa09c1682" href="#summary">pata_hd_register_read(byte in register, byte out low_byte)</a></code></b>
				<p>	<pre>
Select a register and get data from it.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="36159ddfc4160d4737d38469489e5df2" href="#summary">pata_hd_register_write(byte in register, byte in low_byte)</a></code></b>
				<p>	<pre>
Select a register and give it a command or data.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4b35bb2d479fd5c7cd29d344feaa88ea" href="#summary">pata_hd_set_address(byte in pata_hd_head_addr, byte in cyl_high_addr, byte in cyl_low_addr, byte in sec_num_addr, byte in sec_count)</a></code></b>
				<p>	<pre>
Go to a specific sector, select lba/chs mode and master/slave drive
Max sector number is 0x0F_FF_FF_FF or the number of sectors the drive has.
Max drive size is 0x0F_FF_FF_FF * 512 = 137.439 GB
Sector count selects number of sectors that will be read
Sector count value of 0 means 256 sectors will be read

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a4868bd93d9544f521f51c167e6dfb40" href="#summary">pata_hd_write_data(byte in low_byte, byte in high_byte)</a></code></b>
				<p>	<pre>
Write two bytes to disk
Data will not be written unless 256 writes are sent.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0280eab0a058bb933a6b1d18b8077de8" href="#summary">pata_hd_write_sector_address(dword in address)</a></code></b>
				<p>	<pre>
write one entire sector at address. no need for start_read/stop_read

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e1ac1c30d996fc9c8eb5b3d081e0db03" href="#summary">pata_hd_read_sector_address(dword in address)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="818828ef1d1690e72a7dcd9553fa88fc" href="#summary">pata_hd_print_sector(volatile byte out device, dword in address)</a></code></b>
				<p>	<pre>
print a sector to an output device

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0557c1bff61d4543a91cc0271d93b429" href="#summary">pata_hd_read_sector()</a></code></b>
				<p>	<pre>
read one entire sector

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7c568a6027eb73629f92762e6ad37dc7" href="#summary">pata_hd_write_to_sector_end(byte in input_byte)</a></code></b>
				<p>	<pre>
Finnish writing the current sector with input byte.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="22fa0e55f459112be01811257c5b6b35" href="#summary">pata_hd_data_byte'put(byte in data_byte)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9ac9e981ffd431cc6c1243b187863799" href="#summary">pata_hd_busy()</a></code></b>
				<p>	<pre>
Registers may not be accessed unless bsy bit is
low due to internal operations.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c662dbd97469b20aea73b5920f8a8cd4" href="#summary">pata_hd_init()</a></code></b>
				<p>	<pre>
initialize startup settings

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f163bcee9e346e6fbe955f58eff9839d" href="#summary">pata_hd_data_request(bit in read_write)</a></code></b>
				<p>	<pre>
Wait for drive to be ready for a data transfer.
Sets data pins as inputs or outputs for next read or write.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e91cde2bc2dc0e2c364c9133f069d429" href="#summary">pata_hd_stop_write()</a></code></b>
				<p>	<pre>
Tell drive you are done writing

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9877b7b289008b18dc7ff2e32a875fac" href="#summary">pata_hd_select_register(byte in register)</a></code></b>
				<p>	<pre>
Set register select pins to selected register, for internal use only.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c3b40a66cbf726e526105c24fbbb43f7" href="#summary">pata_hd_delay_100ns()</a></code></b>
				<p>	<pre>
100ns delay procedure

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1e2d76d67849cda65e0520cde39740fb" href="#summary">pata_hd_write_sector()</a></code></b>
				<p>	<pre>
Write one sector to the disk, requires start write/stop write.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3a8783fa503c9efd045f834c3321803c" href="#summary">pata_hd_read_pulse_byte(dword in z)</a></code></b>
				<p>	<pre>
goes to next byte instead of word like pata_hd_read_pulse

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="81aaab7a347c3bb27f1a3347064b77b2" href="#summary">pata_hd_start_read(dword in address)</a></code></b>
				<p>	<pre>
Get drive ready for reading at specified address

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="744693aaf15fea55f9ddc31fce8fe8e0" href="#summary">pata_hd_set_idle()</a></code></b>
				<p>	<pre>
Set hard disk to idle state

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0142f0b801ab367911b76a7916e6db10" href="#summary">pata_hd_go_to_sector(dword in sector, byte in sec_count)</a></code></b>
				<p>	<pre>
Go to a specific sector number (lba mode only)
Max sector number is 268435455 or the number of sectors the drive has.
Max drive size is 268435455 * 512 = 137.439 GB
Sector count selects number of sectors that will be read
Sector count value of 0 means 256 sectors will be read

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="310fd9f31d7afe3e6c82428df9abd6ad" href="#summary">pata_hd_drive_ready()</a></code></b>
				<p>	<pre>
Wait for drive to be up to speed and ready for a command.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="093fbb413b8db1263710db064ff81301" href="#summary">pata_hd_print_sector_hex(volatile byte out device,word in bytes_per_line,dword in address)</a></code></b>
				<p>	<pre>
print a sector to an output device in ascii hex

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="97f563d89a3847486082f2c4e630758d" href="#summary">pata_hd_sector_buffer'put(word in address, byte in data)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="647d825ea4fcf8079aa272fd94e12d7c" href="#summary">pata_hd_write_pulse_byte(dword in z)</a></code></b>
				<p>	<pre>
goes to next byte instead of word like pata_hd_write_pulse

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2dfdd0724635d073097468f0229a4327" href="#summary">pata_hd_stop_read()</a></code></b>
				<p>	<pre>
Tell drive you are done reading

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="3494825bdac8a8ba8671ef14c29569ae" href="#summary">_pata_read_512()</a></code></b>
				<p>	<pre>
For faster reading in pata_hd_read_sector procedures

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="4121a1d447dffa1b09b90f4e90856919" href="#summary">pata_hd_data_byte'get() return byte</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="86bbc7510897b1a4437bf84295926430" href="#summary">pata_hd_number_of_sectors'get() return dword</a></code></b>
				<p>	<pre>
Get the size of the drive (number of sectors).
Multiply by 512 for actual size.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="abc6afe8a6ae5c0a5124897c5e48cbe6" href="#summary">pata_hd_sector_buffer'get(word in address) return byte</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_pata_hard_disk.jal" target="_blank">16f877_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_fat32_small_pata_hard_disk.jal" target="_blank">16f877_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_fat32_small_pata_hard_disk.jal" target="_blank">16f877a_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_pata_hard_disk.jal" target="_blank">16f877a_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_fat32_small_pata_hard_disk.jal" target="_blank">18f452_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_pata_hard_disk.jal" target="_blank">18f452_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_fat32_small_pata_hard_disk.jal" target="_blank">18f4525_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_fat32_pata_hard_disk.jal" target="_blank">18f4525_fat32_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_mp3_decoder_vs1053b_pata_hard_disk.jal" target="_blank">18f4525_mp3_decoder_vs1053b_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_pata_hard_disk.jal" target="_blank">18f4525_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_mp3_decoder_vs1053b_pata_hard_disk.jal" target="_blank">18f4620_mp3_decoder_vs1053b_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_pata_hard_disk.jal" target="_blank">18f4620_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_small_pata_hard_disk.jal" target="_blank">18f4620_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_pata_hard_disk.jal" target="_blank">18f4620_fat32_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_fat32_small_pata_hard_disk.jal" target="_blank">18f67j50_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_fat32_pata_hard_disk.jal" target="_blank">18f67j50_fat32_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_usb_msd_pata_hard_disk.jal" target="_blank">18f67j50_usb_msd_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_pata_hard_disk.jal" target="_blank">18f67j50_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_mp3_decoder_vs1053b_pata_hard_disk.jal" target="_blank">18f67j50_mp3_decoder_vs1053b_pata_hard_disk.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

