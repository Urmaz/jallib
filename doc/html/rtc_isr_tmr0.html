<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>rtc_isr_tmr0 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="rtc_isr_tmr0">
    <h1>rtc_isr_tmr0</h1>
	</a>

    <div>
		<font size="+1"><i>Real Time Clock running from ISR on TMR0</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Eur van Andel, Copyright (c) 2003..2008, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4h
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>This Interrupt Service Routine updates the variable seconds about once per second.
The precision is 0.2 ppm, the accuracy depends on the Xtal used. 
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>http://www.romanblack.com/one_sec.htm, http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm
</pre>

	</p>
	<br/>

	<b>Notes</b>
	<p>
		<pre>This is the Bresenham Line Algorithm, invented at IBM in 1962, which gets an accurate end result
by summing the small errors resulting of taking discrete steps and correcting when the error gets too large.
This means that individual second lengths may show some jitter, but that long-term timekeeping is accurate.
Original assembler by Roman Black. 
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1948e74bdfa500d3211f9bed2c8bbf05">var volatile byte seconds                 -- updated by ISR
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e670ecfa0b6477fcd75f0e1f32a67fd5">const mid = 0x4B
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#693b65244778f1726513e37fabfb34fa">var volatile byte bres_lo  = lo
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f39ae8a40a533d347add034b8e8e7e55">const lo  = 0x40  -- ideally modified in timeset too, to adjust clock                                                  
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d054c746021e9e7977131ade25bbb8f5">var volatile byte bres_hi  = hi
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#af000f00587a12b7d70fcb4052fb4f8c">const hi  = 0x4C  -- 2 000 000 for 20 MHz xtal and prescaler = 4
</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d7c902f45f340548836f2cafe4ecc2a2">var volatile byte bres_mid = mid
</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#7d9714b98af9bf7a019d269364217f52">RTC()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1948e74bdfa500d3211f9bed2c8bbf05" href="#summary">var volatile byte seconds                 -- updated by ISR
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e670ecfa0b6477fcd75f0e1f32a67fd5" href="#summary">const mid = 0x4B
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="693b65244778f1726513e37fabfb34fa" href="#summary">var volatile byte bres_lo  = lo
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f39ae8a40a533d347add034b8e8e7e55" href="#summary">const lo  = 0x40  -- ideally modified in timeset too, to adjust clock                                                  
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d054c746021e9e7977131ade25bbb8f5" href="#summary">var volatile byte bres_hi  = hi
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="af000f00587a12b7d70fcb4052fb4f8c" href="#summary">const hi  = 0x4C  -- 2 000 000 for 20 MHz xtal and prescaler = 4
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d7c902f45f340548836f2cafe4ecc2a2" href="#summary">var volatile byte bres_mid = mid
</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="7d9714b98af9bf7a019d269364217f52" href="#summary">RTC()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_rtc_lcd.jal" target="_blank">16f876a_rtc_lcd.jal</a></td>
			</tr>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_rtc_timeset.jal" target="_blank">16f876a_rtc_timeset.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_rtc_timeset.jal" target="_blank">16f877a_rtc_timeset.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_rtc_lcd.jal" target="_blank">16f877a_rtc_lcd.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

