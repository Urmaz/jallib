<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>rtc_mcp7940 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="rtc_mcp7940">
    <h1>rtc_mcp7940</h1>
	</a>

    <div>
		<font size="+1"><i>Real time clock MCP7940</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Matthew Schinkel - borntechi.com, copyright (c) 2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4n
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>This library provides functions for I2C real time clock mcp7940.
             A nice small RTC with a backup power supply pin to keep time
             during power outage. 64bytes sram is also kept during power
             outage.
</pre>

	</p>
	<br/>


	<b>Notes</b>
	<p>
		<pre>Works, but not complete. Still need to add procedures to set time
       and calabrate.
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#d9ed990e5ab17c97c5b221706e39b92e">var byte rtc_mcp7940_array[]</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5db6be5362bce21d07c318a43fae0400">const byte _RTC_MCP7940_ADDRESS = 0b11011110</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#91fe42c272350d08b6e22a45559e992c">const byte _RTC_MCP7940_WRITE = 0</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#27ea8f961072f5c64a28a5590538ab67">const byte _RTC_MCP7940_READ = 1</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#d22578e64b27e6abaf36f2cd1b6eb7ba">rtc_mem'put(byte in address, byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#57324487139547321bd613f87750697e">rtc_mcp7940_write(byte in address, byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9d5ed9d7d03803f954be924591adee7e">rtc_mcp7940_select_supply_voltage()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2ff725aecfe87f88e54aca25cada6b55">rtc_mcp7940_init()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#343f45388a09046d8f4f879ed9871675">rtc_week_day'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#85d226e1d16529bde5d1b58edf589c7d">rtc_minute'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1e58c943c1b326785017ccc829057d47">rtc_mcp7940_read(byte in address) return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#20d4da693f1fa32ae7ab47265e3f4db8">rtc_mem'get(byte in address) return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6e4648d0f49a82afc2f97ab6a9199b49">rtc_month'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a1fcd490007ac2f215eb397502f73833">rtc_hour'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a9a10fb2954574b352f21f425574d936">rtc_year'get() return word</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b4fdf7dd20e636826102926bbc69d320">rtc_day_of_month'get() return byte</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9cdc7d4592cf788add054fd2ee3efc21">rtc_second'get() return byte</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="d9ed990e5ab17c97c5b221706e39b92e" href="#summary">var byte rtc_mcp7940_array[]</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5db6be5362bce21d07c318a43fae0400" href="#summary">const byte _RTC_MCP7940_ADDRESS = 0b11011110</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="91fe42c272350d08b6e22a45559e992c" href="#summary">const byte _RTC_MCP7940_WRITE = 0</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="27ea8f961072f5c64a28a5590538ab67" href="#summary">const byte _RTC_MCP7940_READ = 1</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="d22578e64b27e6abaf36f2cd1b6eb7ba" href="#summary">rtc_mem'put(byte in address, byte in data)</a></code></b>
				<p>	<pre>
Write to SRAM memory. SRAM is backed up during power outage if VBAT is
connected. There are 64 bytes available.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="57324487139547321bd613f87750697e" href="#summary">rtc_mcp7940_write(byte in address, byte in data)</a></code></b>
				<p>	<pre>
Write data to mcp7940 at input address

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9d5ed9d7d03803f954be924591adee7e" href="#summary">rtc_mcp7940_select_supply_voltage()</a></code></b>
				<p>	<pre>
Use supply voltage, not VBAT battery backup. This must be used after any
power outage. Using this procedure will clear the time stamp registers (the
time the outage occurred).

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2ff725aecfe87f88e54aca25cada6b55" href="#summary">rtc_mcp7940_init()</a></code></b>
				<p>	<pre>
Init mcp7940 (start it's clock)

</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="343f45388a09046d8f4f879ed9871675" href="#summary">rtc_week_day'get() return byte</a></code></b>
				<p>	<pre>
read clock week day (1-7)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="85d226e1d16529bde5d1b58edf589c7d" href="#summary">rtc_minute'get() return byte</a></code></b>
				<p>	<pre>
read clock minute

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1e58c943c1b326785017ccc829057d47" href="#summary">rtc_mcp7940_read(byte in address) return byte</a></code></b>
				<p>	<pre>
Read data from mcp7940 at input address

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="20d4da693f1fa32ae7ab47265e3f4db8" href="#summary">rtc_mem'get(byte in address) return byte</a></code></b>
				<p>	<pre>
Read from SRAM memory. SRAM is backed up during power outage if VBAT is
connected. There are 64 bytes available.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6e4648d0f49a82afc2f97ab6a9199b49" href="#summary">rtc_month'get() return byte</a></code></b>
				<p>	<pre>
read clock month

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a1fcd490007ac2f215eb397502f73833" href="#summary">rtc_hour'get() return byte</a></code></b>
				<p>	<pre>
read clock hour

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a9a10fb2954574b352f21f425574d936" href="#summary">rtc_year'get() return word</a></code></b>
				<p>	<pre>
read clock year

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b4fdf7dd20e636826102926bbc69d320" href="#summary">rtc_day_of_month'get() return byte</a></code></b>
				<p>	<pre>
read day of month

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9cdc7d4592cf788add054fd2ee3efc21" href="#summary">rtc_second'get() return byte</a></code></b>
				<p>	<pre>
read clock second

</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_rtc_mcp7940.jal" target="_blank">18f4620_rtc_mcp7940.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

