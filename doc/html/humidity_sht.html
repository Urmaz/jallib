<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>humidity_sht - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="humidity_sht">
    <h1>humidity_sht</h1>
	</a>

    <div>
		<font size="+1"><i>SHTxx, for Sensirion humidity and temperature sensors</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Eur van Andel, eur@fiwihex.nl Copyright &copy; 2008
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			=2.4h
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>The Sensirion SHT1x/SHT7x is a single chip relative humidity and
temperature multi sensor module comprising a calibrated digital output.
It comes in 5 flavors, with different accuracy and package style:
sensor   hum acc  temp acc    package
SHT10    4.5%     0.5C        SMD (LCC)
SHT11    3.0%     0.4C        SMD (LCC) 
SHT15    2.0%     0.3C        SMD (LCC) 
SHT71    3.0%     0.4C        4-pin single-in-line 
SHT75    1.8%     0.3C        4-pin single-in-line 
all consist of the same silicon: the less accurate models are sold cheaper.
My experience is mixed: I've seen some consistent +2C offset in temperature,
but good humidty measurements. The 4-pin package breaks when you touch it.
The SMD package has naked tracks underneath: you can't route under it!
If exposed to >95% RH for 10 minutes, these sensors will go beserk and need 
<60% RH for an hour to recover. You might try heating them. 
protocol is close to I2C, but not the same. Remember to pull up DATA.
0b0000_0011  starts temperature measurement
0b0000_0101  starts humidity measurement
device returns three bytes: MSB, LSB and CRC
this library doesn't perform any CRC check
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>http://www.sensirion.com/en/01_humidity_sensors/00_humidity_sensors.htm
</pre>

	</p>
	<br/>

	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="delay.html">delay</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#c7b4edda51dffec2074a793e57c69bfb">read_raw_hum_sht(byte out MSB, byte out LSB, byte out CRC)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9f22cdb83143314e06233daaa43c2aa4">read_hum_word_sht(word out hum)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#da8179766afa0a08e5b05d5d0a2e73ab">sht_get_data(byte out x)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#691f6bdc286a09a3fed15496ec8c0824">sht_start()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6d13a6a6986e0dc6c8206b96e2f2c868">sht_put_ack()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8e9ab437a04c3b6db25fc178dc29aa72">sht_conn_reset()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#81ee47321f50363ad05116aa5ef43ea5">sht_wait_ack()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e2249934a279d0240eae0dd9bfe17db6">sht_reset()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9535b9eaead3b167ec9ca2d1364c5f71">read_centicelsius_temp_sht(sword out centicelsius)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4bd2f88b4c682f2006c1115d65d1d88e">sht_put_data(byte in x)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1d0b3d4d4ee4415340fe13ef75b06422">read_celsius_temp_sht(sbyte out celsius)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ec7fbef1b5a9302ac3f64aa2eeba4a2e">read_hum_sht(byte out hum)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0934a48ec87edd1feee7271f789fb9a2">read_raw_temp_sht(byte out MSB, byte out LSB, byte out CRC)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="c7b4edda51dffec2074a793e57c69bfb" href="#summary">read_raw_hum_sht(byte out MSB, byte out LSB, byte out CRC)</a></code></b>
				<p>	<pre>read raw 12-bit humidity from SHT
default value of resolution bit is 12 bit RH
SHT takes 55 ms for measurement @ 12 bits
we will wait 70 ms
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every 500ms
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9f22cdb83143314e06233daaa43c2aa4" href="#summary">read_hum_word_sht(word out hum)</a></code></b>
				<p>	<pre>read humidity from SHT, result in word precision 0.01%RH
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every 500ms
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="da8179766afa0a08e5b05d5d0a2e73ab" href="#summary">sht_get_data(byte out x)</a></code></b>
				<p>	<pre>receive one byte from the SHT
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="691f6bdc286a09a3fed15496ec8c0824" href="#summary">sht_start()</a></code></b>
				<p>	<pre>send start
_____         ________ 
DATA:      |_______| 
___     ___ 
SCK : ___|   |___|   |______ 
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6d13a6a6986e0dc6c8206b96e2f2c868" href="#summary">sht_put_ack()</a></code></b>
				<p>	<pre>send ACK
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8e9ab437a04c3b6db25fc178dc29aa72" href="#summary">sht_conn_reset()</a></code></b>
				<p>	<pre>reset SHT interface, must be followed with sht_start and command
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="81ee47321f50363ad05116aa5ef43ea5" href="#summary">sht_wait_ack()</a></code></b>
				<p>	<pre>pretend to wait for ACK
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e2249934a279d0240eae0dd9bfe17db6" href="#summary">sht_reset()</a></code></b>
				<p>	<pre>reset SHT
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9535b9eaead3b167ec9ca2d1364c5f71" href="#summary">read_centicelsius_temp_sht(sword out centicelsius)</a></code></b>
				<p>	<pre>read Celcius temperature from SHT
with 0.01 C resolution, result is sword type, so -327.68 .. +327.68 C
SHT takes 320 ms for measurement @ 14 bits
we will wait 400 ms
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every four seconds!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4bd2f88b4c682f2006c1115d65d1d88e" href="#summary">sht_put_data(byte in x)</a></code></b>
				<p>	<pre>send one byte to the SHT
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1d0b3d4d4ee4415340fe13ef75b06422" href="#summary">read_celsius_temp_sht(sbyte out celsius)</a></code></b>
				<p>	<pre>read Celcius temperature from SHT
with 1 C resolution, result is sbyte type, so -126...+127C
SHT takes 320 ms for measurement @ 14 bits
we will wait 400 ms
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every four seconds!
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ec7fbef1b5a9302ac3f64aa2eeba4a2e" href="#summary">read_hum_sht(byte out hum)</a></code></b>
				<p>	<pre>read humidity from SHT, result in byte precision 1%RH
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every 500ms
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0934a48ec87edd1feee7271f789fb9a2" href="#summary">read_raw_temp_sht(byte out MSB, byte out LSB, byte out CRC)</a></code></b>
				<p>	<pre>read raw 14-bit temperature from SHT
default value of resolution bit is 14 bit temperature
SHT takes 320 ms for measurement @ 14 bits
we will wait 400 ms
SHT may only be switched on for 10% of the time because of self-heating
so this measurement can only happen every two seconds!
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f876a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f876a_sht.jal" target="_blank">16f876a_sht.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

