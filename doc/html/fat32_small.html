<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>fat32_small - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="fat32_small">
    <h1>fat32_small</h1>
	</a>

    <div>
		<font size="+1"><i>FAT32-small sample for reading fat32 filesystem</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Matthew Schinkel, copyright &copy; 2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4k
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>This library reads files & folders from a fat32 formatted
             sd card. This small version only supports the first partition,
             and only one file.
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>http://www.microsoft.com/whdc/system/platform/firmware/fatgen.mspx
http://www.pjrc.com/tech/8051/ide/fat32.html
http://en.wikipedia.org/wiki/File_Allocation_Table
</pre>

	</p>
	<br/>

	<b>Notes</b>
	<p>
		<pre>1. First format your device with fat32 before using this library.
2. Do not put other files onto the storage device. This library will
   overwrite and erase existing files on the storage device because
   only one file is supported, and no fragments are supported.
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#de4f2f870e4f55df46e13252a25d7f61">var bit fat32_small_open_for_read  = FALSE</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d5950c0242a32c9f2c9e42934ec67382">var bit fat32_small_open_for_write = FALSE</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a8e391ff38408807bc0f3dc5a6a233a5">const byte FAT32_SMALL_VOL_ID_DATA[32] = {</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#c9f04f04cfc3ee5626fa5a01d9e9a707">const byte FAT32_SMALL_FILE_NAME_DATA[28] ={</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#98266ce68085de7feb7d4a3366b5a3c0">const dword FAT32_SMALL_FILE_LOCATION = 0x03</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#50f8b1bcc1249f280e02ae65fe2ef542">var dword fat32_small_fat_begin              </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#94c26b0c6a5173b8f6abeb4abaf93edf">const byte FAT32_SMALL_FAT_DATA[12] = {</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#4afd4c83d4d41a47e22833d86b65ab77">var dword fat32_small_file_size              </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#db337114772950b35f76b5673d357e62">var dword fat32_small_root_dir               </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8db2abdc7e2bf8c8e46230df5153c45d">var dword _file_sector_number</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#bae5f9380fd51b0b59e101f8fbf7e6db">var byte  fat32_small_sectors_per_cluster    </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5c35168bba1d17f303387939e8525d0f">var dword fat32_small_cluster_begin          </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7275c1bb70b245b71c57abf10607bc2f">var byte _fat32_small_file_size[4] at fat32_small_file_size </a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#82cb5c2e2c5007aaf53b8f140b74e801">fat32_small_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0a746ab18dbcd6bd69014fb6a20dd8cf">fat32_small_set_file_size(dword in file_size)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f92e61d8a54ecfcda5847bad2325f2e4">fat32_small_file_open(dword in file_sector_number)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8719dd74036e22e560213cafcac1e309">fat32_small_file_read(byte out data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5d274dd2cf475ff4e98fbd63301e3b18">fat32_small_read_boot_sector()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6a62dfaa14342ee20f0bd6e77b9e64ab">fat32_small_file_write(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ea2e7ae430f505054b2e3f1b28714508">fat32_small_file_close()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="de4f2f870e4f55df46e13252a25d7f61" href="#summary">var bit fat32_small_open_for_read  = FALSE</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d5950c0242a32c9f2c9e42934ec67382" href="#summary">var bit fat32_small_open_for_write = FALSE</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a8e391ff38408807bc0f3dc5a6a233a5" href="#summary">const byte FAT32_SMALL_VOL_ID_DATA[32] = {</a></code></b>
				<p>	<pre>root dir constant
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="c9f04f04cfc3ee5626fa5a01d9e9a707" href="#summary">const byte FAT32_SMALL_FILE_NAME_DATA[28] ={</a></code></b>
				<p>	<pre>file name entry constant
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="98266ce68085de7feb7d4a3366b5a3c0" href="#summary">const dword FAT32_SMALL_FILE_LOCATION = 0x03</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="50f8b1bcc1249f280e02ae65fe2ef542" href="#summary">var dword fat32_small_fat_begin              </a></code></b>
				<p>	<pre>the location of the file alocation table for current partition</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="94c26b0c6a5173b8f6abeb4abaf93edf" href="#summary">const byte FAT32_SMALL_FAT_DATA[12] = {</a></code></b>
				<p>	<pre>start data for the fat (file allocation table)
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="4afd4c83d4d41a47e22833d86b65ab77" href="#summary">var dword fat32_small_file_size              </a></code></b>
				<p>	<pre>holds file size after file_read_info()</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="db337114772950b35f76b5673d357e62" href="#summary">var dword fat32_small_root_dir               </a></code></b>
				<p>	<pre>sector location of the root dir</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8db2abdc7e2bf8c8e46230df5153c45d" href="#summary">var dword _file_sector_number</a></code></b>
				<p>	<pre>
Open the file

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="bae5f9380fd51b0b59e101f8fbf7e6db" href="#summary">var byte  fat32_small_sectors_per_cluster    </a></code></b>
				<p>	<pre>the number of sectors per cluster, usually 8</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5c35168bba1d17f303387939e8525d0f" href="#summary">var dword fat32_small_cluster_begin          </a></code></b>
				<p>	<pre>the location of the beginning of clusters (where files & folders data is)</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7275c1bb70b245b71c57abf10607bc2f" href="#summary">var byte _fat32_small_file_size[4] at fat32_small_file_size </a></code></b>
				<p>	<pre>other vars
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="82cb5c2e2c5007aaf53b8f140b74e801" href="#summary">fat32_small_init()</a></code></b>
				<p>	<pre>
initalize fat32

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0a746ab18dbcd6bd69014fb6a20dd8cf" href="#summary">fat32_small_set_file_size(dword in file_size)</a></code></b>
				<p>	<pre>
Set the size of the file.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f92e61d8a54ecfcda5847bad2325f2e4" href="#summary">fat32_small_file_open(dword in file_sector_number)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8719dd74036e22e560213cafcac1e309" href="#summary">fat32_small_file_read(byte out data)</a></code></b>
				<p>	<pre>
Read data from the file

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5d274dd2cf475ff4e98fbd63301e3b18" href="#summary">fat32_small_read_boot_sector()</a></code></b>
				<p>	<pre>
Reads a fat32 boot sector to get the location of the root directory
and FAT Location on the media for the partition selected.
Only one partition is supported.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6a62dfaa14342ee20f0bd6e77b9e64ab" href="#summary">fat32_small_file_write(byte in data)</a></code></b>
				<p>	<pre>
Write data to the file

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ea2e7ae430f505054b2e3f1b28714508" href="#summary">fat32_small_file_close()</a></code></b>
				<p>	<pre>
Close the file

</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_fat32_small_sd_card.jal" target="_blank">16f877_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_fat32_small_pata_hard_disk.jal" target="_blank">16f877_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_fat32_small_pata_hard_disk.jal" target="_blank">16f877a_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_fat32_small_sd_card.jal" target="_blank">16f877a_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_fat32_small_sd_card.jal" target="_blank">18f452_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_fat32_small_pata_hard_disk.jal" target="_blank">18f452_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_fat32_small_sd_card.jal" target="_blank">18f4525_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4525</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4525_fat32_small_pata_hard_disk.jal" target="_blank">18f4525_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_fat32_small_sd_card.jal" target="_blank">18f4550_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_small_pata_hard_disk.jal" target="_blank">18f4620_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_fat32_small_sd_card.jal" target="_blank">18f4620_fat32_small_sd_card.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_fat32_small_pata_hard_disk.jal" target="_blank">18f67j50_fat32_small_pata_hard_disk.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_fat32_small_sd_card.jal" target="_blank">18f67j50_fat32_small_sd_card.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

