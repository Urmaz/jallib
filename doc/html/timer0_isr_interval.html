<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>timer0_isr_interval - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="timer0_isr_interval">
    <h1>timer0_isr_interval</h1>
	</a>

    <div>
		<font size="+1"><i>timer0 isr interval</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Joep Suijs, Copyright &copy; 2008 Joep Suijs
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Rob Hamerling
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4j
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Fixed interval isr with support for non-blocking delays.
.
The setup of this library is straight-forward. First you define the interval
of the interrupt you want. With a higher value, more interrupts are generated.
This gives a higher resolution of your delay, but also puts a high background
load on your PIC. Be carefull if you go beyond 1000 (1kHz). The lowest possible
rate depends on the clock frequency you use and is 77 with an 16f877 on 20 MHz.
.
>>> const timer0_isr_rate = 1000 -- 1 kHz isr rate
.
Next, you need to specify the number of slots. A slot is used to store the
end-time of a delay-period so you need one slot for each concurrent delay.
.
>>> const DELAY_SLOTS = 2 -- support 2 delays at the same time
.
Now, include the library and call it's init function:
.
>>> include timer0_isr_interval
>>> timer0_isr_init() -- init timer0 isr
.
Now we are ready to use the delay functions. To demonstrate it's use, we take
two LEDs and let them blink at their own interval:
.
>> forever loop
>> if (check_delay(0)) then
>> set_delay(0, 409) -- 409 ticks on delay-slot 0
>> led = !led
>> end if
>> if (check_delay(1)) then
>> set_delay(1, 619) -- 619 ticks on delay-slot 1
>> led2 = !led2
>> end if
>> end loop
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#cc72839539a58522a943717b0f56c480">var word internal_isr_counter</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#36620fe7a6dc5688172c1f2481fa2a48">var word isr_countdown[DELAY_SLOTS]</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#60985853f2a0cceea99ece0c41df2914">var byte timer0_load</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#d952e25497fc04f961d2ddf9c8287c85">timer0_isr_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1fa3574a14a680848c89166721380791">set_delay(byte in slot, word in ticks)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b65c27e9dc681e1cd91f09a14f4dec05">ISR()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#e1113cf06da1813e5592ed3df75361c6">isr_counter'get() return word</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#56f2739a72601e4c6fe89f0f5edd417c">check_delay(byte in slot) return bit</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="cc72839539a58522a943717b0f56c480" href="#summary">var word internal_isr_counter</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="36620fe7a6dc5688172c1f2481fa2a48" href="#summary">var word isr_countdown[DELAY_SLOTS]</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="60985853f2a0cceea99ece0c41df2914" href="#summary">var byte timer0_load</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="d952e25497fc04f961d2ddf9c8287c85" href="#summary">timer0_isr_init()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1fa3574a14a680848c89166721380791" href="#summary">set_delay(byte in slot, word in ticks)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b65c27e9dc681e1cd91f09a14f4dec05" href="#summary">ISR()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="e1113cf06da1813e5592ed3df75361c6" href="#summary">isr_counter'get() return word</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="56f2739a72601e4c6fe89f0f5edd417c" href="#summary">check_delay(byte in slot) return bit</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_timer0_interval.jal" target="_blank">16f648a_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f690</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f690_timer0_isr_interval.jal" target="_blank">16f690_timer0_isr_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f723</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f723_timer0_interval.jal" target="_blank">16f723_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f73</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f73_timer0_interval.jal" target="_blank">16f73_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_timer0_interval.jal" target="_blank">16f877_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_timer0_interval.jal" target="_blank">16f877a_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_timer0_interval.jal" target="_blank">16f88_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_timer0_interval.jal" target="_blank">18f14k50_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2450</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2450_timer0_interval.jal" target="_blank">18f2450_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2520</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2520_timer0_interval.jal" target="_blank">18f2520_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2550_timer0_interval.jal" target="_blank">18f2550_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_timer0_interval.jal" target="_blank">18f2620_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_timer0_interval.jal" target="_blank">18f452_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_timer0_interval.jal" target="_blank">18f4550_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_timer0_interval.jal" target="_blank">18f4620_timer0_interval.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_timer0_interval.jal" target="_blank">18f67j50_timer0_interval.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

