<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>i2c_hw_slave_msg - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="i2c_hw_slave_msg">
    <h1>i2c_hw_slave_msg</h1>
	</a>

    <div>
		<font size="+1"><i>i2c hardware slave Message Interface</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Sebastien Lelong, Joep Suijs, Copyright &copy; 2008-2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4i
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>this library provides an message interface to i2c hardware slave. 
It relies on the jalv2 implementation of Microchip Application Note AN734.


                                        
The user needs to supply a procedure to process the received message. 
Basically, this i2c slave waits for a full message to arrive. Then it calls 
the user procedure to process the message and (optional) prepare a response.
Subsequently, this lib will pass the response data over to the master, if 
it wants to have them.
See corresponding sample for more details.



</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>  - AN734: http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1824&appnote=en011798
</pre>

	</p>
	<br/>

	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="i2c_hw_slave.html">i2c_hw_slave</a></li>
			<li><a href="i2c_hw_slave_isr.html">i2c_hw_slave_isr</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#9f87150c11cd14a0ff9cb1ba17514458">var byte i2c_index         </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#02915842ac566c70d1e2c1eb1cd8b034">var bit  i2c_datapresent   </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a2b504bc858e591e7eb9e991a3f55596">const bit i2c_enable_start_stop_interrupts = true</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#71fe5c998daea0b362989b60c0dc0fb9">var byte i2c_buffer[I2C_BUFFER_SIZE]</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#3116048c0efc7e52be7938de7c9983db">i2c_hw_slave_on_stop()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b9d80b7d0978b130e4b6351ef34bebff">i2c_hw_slave_on_state_4()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1eaf913e968f1e99f7ab367082852fee">i2c_hw_slave_on_state_3()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b6af022ab622c30a72e045b102290440">i2c_hw_slave_on_error()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#942283756002ff013226cf0d92ebd740">i2c_hw_slave_on_state_1(byte in _trash)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#783fe147556d2e8778438daebb602f22">i2c_hw_slave_on_start()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#3fca250948583a35f2a68cbcbecf0982">i2c_call_process_message()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#50df590490bd1d2ba521eed3b7eca552">i2c_hw_slave_on_state_2(byte in rcv)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#cde812660d64aa79543a2b87da4760c3">i2c_hw_slave_on_state_5()</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="9f87150c11cd14a0ff9cb1ba17514458" href="#summary">var byte i2c_index         </a></code></b>
				<p>	<pre>vars
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="02915842ac566c70d1e2c1eb1cd8b034" href="#summary">var bit  i2c_datapresent   </a></code></b>
				<p>	<pre>datapresent flag</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a2b504bc858e591e7eb9e991a3f55596" href="#summary">const bit i2c_enable_start_stop_interrupts = true</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="71fe5c998daea0b362989b60c0dc0fb9" href="#summary">var byte i2c_buffer[I2C_BUFFER_SIZE]</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="3116048c0efc7e52be7938de7c9983db" href="#summary">i2c_hw_slave_on_stop()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b9d80b7d0978b130e4b6351ef34bebff" href="#summary">i2c_hw_slave_on_state_4()</a></code></b>
				<p>	<pre>this callback is used when master, after having read something,
still wants to read and get data from us.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1eaf913e968f1e99f7ab367082852fee" href="#summary">i2c_hw_slave_on_state_3()</a></code></b>
				<p>	<pre>this callback is used when master wants to read something
from us. It should use i2c_hw_slave_write() to send something
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b6af022ab622c30a72e045b102290440" href="#summary">i2c_hw_slave_on_error()</a></code></b>
				<p>	<pre>this callback is used when something wrong happened 
during communication between master and us
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="942283756002ff013226cf0d92ebd740" href="#summary">i2c_hw_slave_on_state_1(byte in _trash)</a></code></b>
				<p>	<pre>this callback is used when master wants to talk to us
and our i2c address has been recognized
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="783fe147556d2e8778438daebb602f22" href="#summary">i2c_hw_slave_on_start()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="3fca250948583a35f2a68cbcbecf0982" href="#summary">i2c_call_process_message()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="50df590490bd1d2ba521eed3b7eca552" href="#summary">i2c_hw_slave_on_state_2(byte in rcv)</a></code></b>
				<p>	<pre>This callback is used when master sends a data byte
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="cde812660d64aa79543a2b87da4760c3" href="#summary">i2c_hw_slave_on_state_5()</a></code></b>
				<p>	<pre>this callback is used when master does not want to talk
with us anymore... This is an appropriate place to reset
data for instance
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f723</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f723_i2c_hw_slave_eeprom_simulator.jal" target="_blank">16f723_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>16f723</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f723_i2c_hw_slave_msg.jal" target="_blank">16f723_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>16f73</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f73_i2c_hw_slave_msg.jal" target="_blank">16f73_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>16f73</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f73_i2c_hw_slave_eeprom_simulator.jal" target="_blank">16f73_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_i2c_hw_slave_eeprom_simulator.jal" target="_blank">16f877_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_i2c_hw_slave_msg.jal" target="_blank">16f877_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_i2c_hw_slave_msg.jal" target="_blank">16f877a_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_i2c_hw_slave_eeprom_simulator.jal" target="_blank">16f877a_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_i2c_hw_slave_msg.jal" target="_blank">16f88_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_i2c_hw_slave_eeprom_simulator.jal" target="_blank">16f88_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_i2c_hw_slave_eeprom_simulator.jal" target="_blank">18f14k50_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>18f14k50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f14k50_i2c_hw_slave_msg.jal" target="_blank">18f14k50_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_i2c_hw_slave_msg.jal" target="_blank">18f2620_i2c_hw_slave_msg.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_i2c_hw_slave_eeprom_simulator.jal" target="_blank">18f2620_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_i2c_hw_slave_eeprom_simulator.jal" target="_blank">18f4550_i2c_hw_slave_eeprom_simulator.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_i2c_hw_slave_msg.jal" target="_blank">18f4550_i2c_hw_slave_msg.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

