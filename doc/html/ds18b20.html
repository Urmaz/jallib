<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>ds18b20 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="ds18b20">
    <h1>ds18b20</h1>
	</a>

    <div>
		<font size="+1"><i>1 wire library for DS18b20</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Jean Marchaudon, Copyright &copy; 2010..2010, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			And-Tech.pl, Bert van Dam, Jean Marchaudon, Olivier Seit,
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			>=2.4m
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>1 wire routines for the DS18b20 temperature probe
   Read sensor temperature DS18b20 from a specific device using the
   drive's ID


        
use _s_ procedures when there is only one device on the bus.   
use _m_ procedures when there is more than one device on the bus. 
</pre>

	</p>
	<br/>

	<b>Sources</b>
	<p>
		<pre>ds18b20 datasheet (http://datasheets.maxim-ic.com/en/ds/DS18B20.pdf)
</pre>

	</p>
	<br/>

	<b>Notes</b>
	<p>
		<pre>requires 1_wire.jal
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#0b390746ab88a12025ba9ff6e87e8079">var byte scratchpad[9]</a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#66b91a61bda3684e9236b0c83d7afd4f">ds18b20_m_convert(byte in id[])</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b39212789796570f75fe5f951ff1730b">ds18b20_convert()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#28ddfd2a0175e7f810659408fff5dcdc">ds18b20_setup(sbyte in th, sbyte in tl, byte in resolution)</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#16e3d18d7ee4c4c042f4307427506692">_ds18b20_skip_rom()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#60e778a4a518905fee2f0ec123c1feeb">_ds18b20_match_rom(byte in id[])</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#7c1d1bba500e27905e9837cf3605fc57">ds18b20_m_temp(byte in id[], sword out temperature) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#9558e25199f281adebd02572055ef6d5">ds18b20_s_read_rom() return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#6dd8058167ab146e174ca1e9d8c9d3a3">ds18b20_s_temp(sword out temperature) return bit</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#ebc5823dd02440f14a3a25875bc9ed99">_ds18b20_read( byte in nbre_byte ) return bit</a></code></b>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="0b390746ab88a12025ba9ff6e87e8079" href="#summary">var byte scratchpad[9]</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="66b91a61bda3684e9236b0c83d7afd4f" href="#summary">ds18b20_m_convert(byte in id[])</a></code></b>
				<p>	<pre>
ds18b20_m_convert - start conversion of a specific devices on the bus.

Parameter: 8-byte ID of device to operate on

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b39212789796570f75fe5f951ff1730b" href="#summary">ds18b20_convert()</a></code></b>
				<p>	<pre>
ds18b20_convert - start conversion of all devices on the bus.

This is actually like an _s_ procedure. When it is executed on a bus with 
multiple ds18b20 devices, all will start conversion.

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="28ddfd2a0175e7f810659408fff5dcdc" href="#summary">ds18b20_setup(sbyte in th, sbyte in tl, byte in resolution)</a></code></b>
				<p>	<pre>
ds18b20_setup -- !!! UNTESTED !!! 

***** YOU DON'T NEED THIS FUNCTION FOR TEMPERATURE *****
*****   READING WITH 12 BIT (DEFAULT) RESOLUTION   *****
*** PLEASE REPORT IF YOU TESTED THIS FUNCTION (PARTLY OR FULL) ***
resolution can be 9, 10, 11, 12
TL = minimum -55
TH = maximum 124

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="16e3d18d7ee4c4c042f4307427506692" href="#summary">_ds18b20_skip_rom()</a></code></b>
				<p>	<pre>
_ds18b20_skip_rom - activate all devices on the bus

Note: not sure if 'all devices' means all ds18b20 devices or all one_wire
devices. I guess this is beyond the scope of this library though ;)

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="60e778a4a518905fee2f0ec123c1feeb" href="#summary">_ds18b20_match_rom(byte in id[])</a></code></b>
				<p>	<pre>
_ds18b20_match_rom - activate specified device

Parameter: 8-byte ID of device to operate on

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="7c1d1bba500e27905e9837cf3605fc57" href="#summary">ds18b20_m_temp(byte in id[], sword out temperature) return bit</a></code></b>
				<p>	<pre>
ds18b20_m_temp - read temperature from single device on bus

Use this procedure when there is more than one device on the one_wire bus.
behavior of this procedure (retry, converions) is influenced by 
constants, see lib header.
return:  true if success (crc okay).

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="9558e25199f281adebd02572055ef6d5" href="#summary">ds18b20_s_read_rom() return bit</a></code></b>
				<p>	<pre>
ds18b20_s_read_rom - read ID from single device on bus

Only use this procedure when there is only one device on the one_wire bus.
result is 8-byte ID in the scratchpad area 
return:  true if success (crc okay).

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="6dd8058167ab146e174ca1e9d8c9d3a3" href="#summary">ds18b20_s_temp(sword out temperature) return bit</a></code></b>
				<p>	<pre>
ds18b20_s_temp - read temperature from single device on bus

Only use this procedure when there is only one device on the one_wire bus.
behavior of this procedure (retry, converions) is influenced by 
constants, see lib header.
return:  true if success (crc okay).

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="ebc5823dd02440f14a3a25875bc9ed99" href="#summary">_ds18b20_read( byte in nbre_byte ) return bit</a></code></b>
				<p>	<pre>
_ds18b20_read - read the requested number of bytes 

The result is stored in scratchpad for further processiong.
crc of received data is calculated. 

parameter: nbre_byte:   8 when you read rom ID
9 when you read the scratchpad

return:  true if success (crc okay).

</pre>
</p>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_ds18b20_single.jal" target="_blank">16f648a_ds18b20_single.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_ds18b20_single.jal" target="_blank">16f877_ds18b20_single.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_ds18b20_single.jal" target="_blank">16f877a_ds18b20_single.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_ds18b20_single.jal" target="_blank">16f88_ds18b20_single.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2450</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2450_ds18b20_single.jal" target="_blank">18f2450_ds18b20_single.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_1wire_ds1820.jal" target="_blank">18f2585_1wire_ds1820.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_ds18b20_single.jal" target="_blank">18f4550_ds18b20_single.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

