<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
    		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
		<title>tm1638 - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="tm1638">
    <h1>tm1638</h1>
	</a>

    <div>
		<font size="+1"><i>Library to support 7-segment display module with TM1638</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			Rob Hamerling, Copyright &copy; 2014..2014, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4q2
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>Library for a module with TM1638 with
- serial interface
- 8  7-segment displays with dp (decimal point)
- 8  LEDs
- 8  push buttons
.
Data may be displayed anywhere in the 7-segment displays.
The position may be specified with an offset (depending on data type)
.
The tm1638 module uses 3 data wires, which have to be specified by the user.
Before including this library declare the following aliases (mandatory):
.
alias tm1638_dio            is pin_??                    -- pin for data I/O signal
alias tm1638_clk            is pin_??                    -- pin for clock signal
alias tm1638_stb            is pin_??                    -- pin for chip select signal
alias tm1638_dio_direction  is pin_??_direction
.
The pins for tm1638_clk and tm1638_stb must be configured
for digital output by the user program
.
The following constant may be specified as well (optionally):
.
const byte TM1638_WIDTH    =  ?          (number of 7-segment digits, defaults to 8)
.
Initialize the TM1638 with tm1638_init()
</pre>

	</p>
	<br/>


	<b>Notes</b>
	<p>
		<pre>- Supports (= has been tested) only a module with tm1638 chip and
         8 display digits, 8 single color LEDs and 8 buttons.
         Support for modules with duo-leds or TM1640 may be added later.
</pre>

	</p>
	<br/>
	
	<b>Dependencies</b>
	<p>
		<ul>
			<li><a href="tm1638_font.html">tm1638_font</a></li>
		</ul>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#81f1fecab1ea4f1d382fa6ac61f62c56">const  byte  TM1638_MODE_NORMAL      = 0b_0100_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#04a963618d3640fc87eb1517ad0ce4b4">const  byte  TM1638_ADDRESS_SELECT   = 0b_1100_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#a4be0b76e315589971326b017b8cc88c">const  byte  TM1638_DISPLAY_OFF      = 0b_1000_0000</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#698a17614793132bfffe87cef4a1fad2">const  byte  TM1638_MODE_TEST        = 0b_0100_1000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ac8984466beac6c53a0b721015ddfdc9">const  byte  TM1638_LED_ON           = 0b_0000_0001       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d6fed575303e8fdcde143b3e5f5b3e0e">const  byte  TM1638_DISPLAY_PWM1     = 0b_1000_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#cb7b532b107fbec218d69cddaa38440f">const  byte  TM1638_READ_KEYS        = 0b_0100_0010       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ad29f669885b5c698eb0f37ce3aeda86">const  byte  TM1638_DISPLAY_PWM11    = 0b_1000_0100       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0a8cc0ef4e48744eaf62d1437de0c9f9">const  byte  TM1638_ADDRESS_AUTO     = 0b_0100_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#0c9342916dcb72f9c93fd7e41612f158">const  byte  TM1638_DISPLAY_PWM4     = 0b_1000_0010       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#993fb1eaeffad2f813b764a0ca474d5c">const  byte  TM1638_DISPLAY_PWM14    = 0b_1000_0111       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#29b12cacd195ffca7a1968c355372e83">const  byte  TM1638_DISPLAY_PWM12    = 0b_1000_0101       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#eac707fe06581d1bcc1e9b84219d1d6f">const  byte  TM1638_DISPLAY_PWM13    = 0b_1000_0110       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2c92c867283455634add6ff7e7375d4c">const  byte  TM1638_DISPLAY_PWM10    = 0b_1000_0011       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#13d98cbfe9b78cae0ffeb77ba956f405">const  byte  TM1638_DISPLAY_PWM2     = 0b_1000_0001       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7dae80a2be970d1c4a3215172a614f7a">const  byte  TM1638_DOT              = 0b_1000_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#5f5434dda55eb5814fcbd28a466fe507">const  byte  TM1638_WRITE_DATA       = 0b_0100_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#afea722239fd0cec6078f01f36517531">const  byte  TM1638_LED_OFF          = 0b_0000_0000       </a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#50d2e629a616fe480298e4d096627111">const  byte  TM1638_DISPLAY_ON       = 0b_1000_1000</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#2ff9834bb8be2abd3691e26810bb718c">const  byte  TM1638_ADDRESS_FIXED    = 0b_0100_0100       </a></code></b>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#138808fafe4be9a24091661fe3a87e33">tm1638_set_leds(byte in leds)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#bed8e80c0019f73ef16a7d1e9be2ffa2">tm1638_display_clear()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#8f653bd5d54f0263dbc9c66eec2421f2">tm1638_init()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#963a51462a3a6576e2459be4465c5327">tm1638_display_byte_bin(byte in number)</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#230010ff8d6bc6cc3f82f359daa33796">_tm1638_write_byte(byte in data)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#ff39d0c4f53faeeaee8ae782f3652609">_tm1638_write_command(byte in cmd)</a></code></b>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#b4011a2f88b9a80ae150cd0f888ceaab">tm1638_get_buttons() return byte</a></code></b>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#3c99e6920c88e5ffef5ffb6591cbf63b">_tm1638_read_byte() return byte</a></code></b>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="81f1fecab1ea4f1d382fa6ac61f62c56" href="#summary">const  byte  TM1638_MODE_NORMAL      = 0b_0100_0000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="04a963618d3640fc87eb1517ad0ce4b4" href="#summary">const  byte  TM1638_ADDRESS_SELECT   = 0b_1100_0000       </a></code></b>
				<p>	<pre>base of command byte</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="a4be0b76e315589971326b017b8cc88c" href="#summary">const  byte  TM1638_DISPLAY_OFF      = 0b_1000_0000</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="698a17614793132bfffe87cef4a1fad2" href="#summary">const  byte  TM1638_MODE_TEST        = 0b_0100_1000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ac8984466beac6c53a0b721015ddfdc9" href="#summary">const  byte  TM1638_LED_ON           = 0b_0000_0001       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d6fed575303e8fdcde143b3e5f5b3e0e" href="#summary">const  byte  TM1638_DISPLAY_PWM1     = 0b_1000_0000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="cb7b532b107fbec218d69cddaa38440f" href="#summary">const  byte  TM1638_READ_KEYS        = 0b_0100_0010       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ad29f669885b5c698eb0f37ce3aeda86" href="#summary">const  byte  TM1638_DISPLAY_PWM11    = 0b_1000_0100       </a></code></b>
				<p>	<pre>PWM dutycycle for LEDs</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0a8cc0ef4e48744eaf62d1437de0c9f9" href="#summary">const  byte  TM1638_ADDRESS_AUTO     = 0b_0100_0000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="0c9342916dcb72f9c93fd7e41612f158" href="#summary">const  byte  TM1638_DISPLAY_PWM4     = 0b_1000_0010       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="993fb1eaeffad2f813b764a0ca474d5c" href="#summary">const  byte  TM1638_DISPLAY_PWM14    = 0b_1000_0111       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="29b12cacd195ffca7a1968c355372e83" href="#summary">const  byte  TM1638_DISPLAY_PWM12    = 0b_1000_0101       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="eac707fe06581d1bcc1e9b84219d1d6f" href="#summary">const  byte  TM1638_DISPLAY_PWM13    = 0b_1000_0110       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2c92c867283455634add6ff7e7375d4c" href="#summary">const  byte  TM1638_DISPLAY_PWM10    = 0b_1000_0011       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="13d98cbfe9b78cae0ffeb77ba956f405" href="#summary">const  byte  TM1638_DISPLAY_PWM2     = 0b_1000_0001       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7dae80a2be970d1c4a3215172a614f7a" href="#summary">const  byte  TM1638_DOT              = 0b_1000_0000       </a></code></b>
				<p>	<pre>segment of decimal point</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="5f5434dda55eb5814fcbd28a466fe507" href="#summary">const  byte  TM1638_WRITE_DATA       = 0b_0100_0000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="afea722239fd0cec6078f01f36517531" href="#summary">const  byte  TM1638_LED_OFF          = 0b_0000_0000       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="50d2e629a616fe480298e4d096627111" href="#summary">const  byte  TM1638_DISPLAY_ON       = 0b_1000_1000</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="2ff9834bb8be2abd3691e26810bb718c" href="#summary">const  byte  TM1638_ADDRESS_FIXED    = 0b_0100_0100       </a></code></b>
				<p><i>No documentation found</i></p>
		</li>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="138808fafe4be9a24091661fe3a87e33" href="#summary">tm1638_set_leds(byte in leds)</a></code></b>
				<p>	<pre>
Title:   Set all LEDs
Input:   Byte with bit pattern: 0 = off, 1 = on,
Leftmost led (LED1) is controlled by the least significant bit.
Returns: nothing

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="bed8e80c0019f73ef16a7d1e9be2ffa2" href="#summary">tm1638_display_clear()</a></code></b>
				<p>	<pre>
Title:  Clear all display digits (inclusive decimal point)
Input:  None

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="8f653bd5d54f0263dbc9c66eec2421f2" href="#summary">tm1638_init()</a></code></b>
				<p>	<pre>
Title:   Initialize TM1638 module
Notes:   - The TM1638 module will be kept in fixed address mode,
only during init auto-increase mode is used (temporary).

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="963a51462a3a6576e2459be4465c5327" href="#summary">tm1638_display_byte_bin(byte in number)</a></code></b>
				<p>	<pre>
Title: Display binary number (byte, 8 bits)
Input:  - byte with value to be displayed

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="230010ff8d6bc6cc3f82f359daa33796" href="#summary">_tm1638_write_byte(byte in data)</a></code></b>
				<p>	<pre>
Title:  Send byte 'raw' to the TM1638 (8 bits bit-banging)
Notes:  STB should have been (re)set according to requirements of caller

</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="ff39d0c4f53faeeaee8ae782f3652609" href="#summary">_tm1638_write_command(byte in cmd)</a></code></b>
				<p>	<pre>
Title:  Send a command to the TM1638
Input:  - Byte with command

</pre>
</p>
		</li>
	</ul>

	<br/>

		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="b4011a2f88b9a80ae150cd0f888ceaab" href="#summary">tm1638_get_buttons() return byte</a></code></b>
				<p>	<pre>
Title:   Get button positions
Returns: Byte with bit pattern of buttons (0 = off, 1 = on)
Leftmost button (S1) is represented by the least significant bit.

</pre>
</p>
		</li>
	</ul>

	<i><small>Private</small></i>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="3c99e6920c88e5ffef5ffb6591cbf63b" href="#summary">_tm1638_read_byte() return byte</a></code></b>
				<p>	<pre>
Title:    Receive a byte from TM1638
Returns:  Byte
Notes:    - STB should have been (re)set according to requirements of caller
 DIO should be configured for input (and be pulled up?)

</pre>
</p>
		</li>
	</ul>

	<br/>


			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>12f1572</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/12f1572_tm1638.jal" target="_blank">12f1572_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>12f683</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/12f683_tm1638.jal" target="_blank">12f683_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f648a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f648a_tm1638.jal" target="_blank">16f648a_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f723</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f723_tm1638.jal" target="_blank">16f723_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f73</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f73_tm1638.jal" target="_blank">16f73_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877_tm1638.jal" target="_blank">16f877_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f877a</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f877a_tm1638.jal" target="_blank">16f877a_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>16f88</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/16f88_tm1638.jal" target="_blank">16f88_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2450</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2450_tm1638.jal" target="_blank">18f2450_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2520</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2520_tm1638.jal" target="_blank">18f2520_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2550_tm1638.jal" target="_blank">18f2550_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2620_tm1638.jal" target="_blank">18f2620_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f452</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f452_tm1638.jal" target="_blank">18f452_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4550</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4550_tm1638.jal" target="_blank">18f4550_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4620</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4620_tm1638.jal" target="_blank">18f4620_tm1638.jal</a></td>
			</tr>
			<tr>
			<td><b>18f67j50</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f67j50_tm1638.jal" target="_blank">18f67j50_tm1638.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

