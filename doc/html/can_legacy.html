<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
		<title>can_legacy - jallib API doc</title>
    </head>
    <body>
		
		        <div id="page">
        
            <div id="pagecontent">

			    
	<a href="#toc" name="can_legacy">
    <h1>can_legacy</h1>
	</a>

    <div>
		<font size="+1"><i>Legacy internal CAN controller</i></font>
	</div>

	<br/>

    <div class="narrow">
        
	<table>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Author</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			William Welch Copyright (c) 2009, all rights reserved.
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Adapted-by</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			
		</td>
	</tr>
	<tr>
		<td style="border: 1px solid #aaa; padding: 5px;">
			<b>Compiler</b>
		</td>
		<td style="border: 1px solid #aaa; padding: 5px;">
			2.4
		</td>
	</tr>
	</table>

	<br/>
	
	<b>Description</b>
	<p>
		<pre>

 The early 18C/F family had an internal CAN controller that was
very similar to the MCP2515.  More recent devices have an ECAN controller which 
has many enhanced features, but defaults on power-up to a 'legacy' mode.
</pre>

	</p>
	<br/>


	
	<b>Dependencies</b>
	<p>
		<i>No dependency found</i>
	</p>
	<br/>


			<br/>
				<h2><a name="summary">Summary</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#1458f63c0376bd91ac3eb6cdc58ac209">can_set_rxb1_filter5(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#d58ef3a59b404111ccb6112e1312d930">can_encode_std_id(dword in out can_id)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e4859c7e67057608c468b34dd18ddde1">can_encode_rtr_id(dword in out can_id)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#034374fc8d3673250dc162f16a76f389">can_encode_ext_id(dword in out can_id)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#bc3b2167455d0286ed77ea6523c7b11f">can_set_rxb1_filter3(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e50e7c06db8a559cddaf4ccb1ca83aa4">can_set_rxb0_filter0(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e24b35bef964c3fb29d73343d939c011">can_reset()</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b82e47adb8b6c74f9de4c52630da429e">can_set_rxb0_filter1(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7087607b3059d51484b011c658748bc7">can_set_rxb0_mask(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#93657cad431c5307a1df7c9564d250f5">can_set_config(byte in p1, byte in p2, byte in p3)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#782ee0139c141fe91c10280590547dac">can_set_rxb1_filter4(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#b3e28ad7c5d4bca0c25f03d33f8783b0">can_set_rxb1_mask(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#560e178b04e9e354592932f039c39ba6">can_set_rxb1_filter2(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a href="#705ce9fe4a659af43fba70a95ac5bebc">can_send(byte in buf_no, dword in can_id, byte in buf[8], byte in len) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#7b54ed12f93e699b926ca10776ee1a13">can_is_ext_id(dword in can_id) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#e314b2fd191f4a0641d4f100aa5e2f59">can_is_rtr_id(dword in can_id) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#1ad611a1892ee1d0a9cd056ff1594634">can_is_error_id(dword in can_id) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#f192192cb616f2b7818d642ffa996971">can_is_std_id(dword in can_id) return bit</a></code></b>
		</li>
		<li>
				<b><code name="code" class="python"><a href="#77d8c1da758de02959abd7426fc5ae63">can_receive(byte in buf_no, dword out can_id, byte out buf[8], byte out len) return bit</a></code></b>
		</li>
	</ul>



			<br/>
				<h2><a name="api">API details</a></h2>

		<h3><a name="Global variables/contants">Global variables/contants</a></h3>
		<ul>
	</ul>


		<h3><a name="Procedures">Procedures</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="1458f63c0376bd91ac3eb6cdc58ac209" href="#summary">can_set_rxb1_filter5(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB1 acceptance filter #5
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="d58ef3a59b404111ccb6112e1312d930" href="#summary">can_encode_std_id(dword in out can_id)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e4859c7e67057608c468b34dd18ddde1" href="#summary">can_encode_rtr_id(dword in out can_id)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="034374fc8d3673250dc162f16a76f389" href="#summary">can_encode_ext_id(dword in out can_id)</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="bc3b2167455d0286ed77ea6523c7b11f" href="#summary">can_set_rxb1_filter3(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB1 acceptance filter #3
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e50e7c06db8a559cddaf4ccb1ca83aa4" href="#summary">can_set_rxb0_filter0(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB0 acceptance filter #0
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e24b35bef964c3fb29d73343d939c011" href="#summary">can_reset()</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b82e47adb8b6c74f9de4c52630da429e" href="#summary">can_set_rxb0_filter1(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB0 acceptance filter #1
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7087607b3059d51484b011c658748bc7" href="#summary">can_set_rxb0_mask(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RX acceptance mask for buffer RXB0
N.B. calling with 0,0,0,0 will pass all messages
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="93657cad431c5307a1df7c9564d250f5" href="#summary">can_set_config(byte in p1, byte in p2, byte in p3)</a></code></b>
				<p>	<pre>set bit-rate and related can bus configuration.
see datasheet for details.
N.B. The chip must already be in 'configuration mode'.
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="782ee0139c141fe91c10280590547dac" href="#summary">can_set_rxb1_filter4(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB1 acceptance filter #4
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="b3e28ad7c5d4bca0c25f03d33f8783b0" href="#summary">can_set_rxb1_mask(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RX acceptance mask for buffer RXB1
N.B. calling with 0,0,0,0 will pass all messages
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="560e178b04e9e354592932f039c39ba6" href="#summary">can_set_rxb1_filter2(byte in sidh, byte in sidl, byte in eidh, byte in eidl)</a></code></b>
				<p>	<pre>set RXB1 acceptance filter #2
</pre>
</p>
		</li>
	</ul>


		<h3><a name="Functions">Functions</a></h3>
		<ul>
		<li>
				<b><code name="code" class="python"><a name="705ce9fe4a659af43fba70a95ac5bebc" href="#summary">can_send(byte in buf_no, dword in can_id, byte in buf[8], byte in len) return bit</a></code></b>
				<p>	<pre>send CAN frame
Non-blocking -- function returns immediately if buffer is busy (in-use)
FIXME. this is ugly code
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="7b54ed12f93e699b926ca10776ee1a13" href="#summary">can_is_ext_id(dword in can_id) return bit</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="e314b2fd191f4a0641d4f100aa5e2f59" href="#summary">can_is_rtr_id(dword in can_id) return bit</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="1ad611a1892ee1d0a9cd056ff1594634" href="#summary">can_is_error_id(dword in can_id) return bit</a></code></b>
				<p>	<pre>FIXME: will we ever need this?
</pre>
</p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="f192192cb616f2b7818d642ffa996971" href="#summary">can_is_std_id(dword in can_id) return bit</a></code></b>
				<p><i>No documentation found</i></p>
		</li>
		<li>
				<b><code name="code" class="python"><a name="77d8c1da758de02959abd7426fc5ae63" href="#summary">can_receive(byte in buf_no, dword out can_id, byte out buf[8], byte out len) return bit</a></code></b>
				<p>	<pre>receive CAN frame, sets can_id flag bits as to standard/extended, error, and remote.
Non-blocking -- function returns immediately if no message is available.
FIXME. this is ugly code
</pre>
</p>
		</li>
	</ul>



			<br/>
				<h2><a name="related_samples">Related samples</a></h2>
	Here are the list of samples which use this library:<br/><br/>
	<table border=1>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_can_serial_hw.jal" target="_blank">18f2585_can_serial_hw.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_canid4_serial_adapter.jal" target="_blank">18f2585_canid4_serial_adapter.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_can_serial_adapter.jal" target="_blank">18f2585_can_serial_adapter.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_can_monitor.jal" target="_blank">18f2585_can_monitor.jal</a></td>
			</tr>
			<tr>
			<td><b>18f2585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f2585_canid4_monitor.jal" target="_blank">18f2585_canid4_monitor.jal</a></td>
			</tr>
			<tr>
			<td><b>18f4585</b></td><td><a href="http://code.google.com/p/jallib/source/browse/trunk/sample/18f4585_canid4_monitor.jal" target="_blank">18f4585_canid4_monitor.jal</a></td>
			</tr>
	</table>

			<br/>

            </div>
        </div>


	</body>
</html>

